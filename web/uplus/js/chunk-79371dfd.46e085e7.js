(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79371dfd"],{"1f06":function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"39e4":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"3ebc":function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"c",function(){return p}),n.d(e,"i",function(){return g}),n.d(e,"l",function(){return m}),n.d(e,"a",function(){return S}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return l}),n.d(e,"n",function(){return h}),n.d(e,"o",function(){return _}),n.d(e,"p",function(){return b}),n.d(e,"q",function(){return v}),n.d(e,"j",function(){return x}),n.d(e,"h",function(){return I}),n.d(e,"m",function(){return N}),n.d(e,"k",function(){return y});var a=n("c1f9"),r=n.n(a),o=n("7c15");function i(t){return r.a.sortBy(t,function(t){return t.sortId})}function s(t){return o["a"].get("/role").then(function(e){return t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function c(t){return o["a"].get("/user").then(function(e){var n={id:"",name:"全部",roleId:""};return e.data.unshift(n),t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function u(t){return o["a"].get("/company?page=0&size=1000").then(function(e){var n={id:"",name:"全部"};return e.data.list.unshift(n),t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function l(t,e){if(t)return o["a"].get("/goods?companyId=".concat(t,"&page=0&size=1000")).then(function(t){return e&&e(t.data),t.data}).catch(function(t){console.log(t)}),[]}function d(t){var e={dKey:"",id:"",dValue:"全部"};return t.unshift(e),t}var f=i(JSON.parse(sessionStorage.departmentList)),p=i(JSON.parse(sessionStorage.doctorTitleList)),g=i(JSON.parse(sessionStorage.hosLevelList)),m=i(JSON.parse(sessionStorage.propertyList)),h=i(JSON.parse(sessionStorage.skillTagList)),b=i(JSON.parse(sessionStorage.subDepartmentList)),v=i(JSON.parse(sessionStorage.typeList)),y=i(JSON.parse(sessionStorage.paperTypeList)),I=i(JSON.parse(sessionStorage.hopType)),S=JSON.parse(sessionStorage.addressProvince);v=d(v),p=d(p),g=d(g),m=d(m),h=d(h),y=d(y),I=d(I);var N=[{id:1,dKey:1,dValue:"男"},{id:0,dKey:0,dValue:"女"}],_=[{id:0,dKey:0,dValue:"启用"},{id:-1,dKey:-1,dValue:"停用"}],x=[{id:"1234560",dKey:!0,dValue:"是"},{id:"1234567",dKey:!1,dValue:"否"}]},"48e1":function(t,e){e.f={}.propertyIsEnumerable},"62fa":function(t,e,n){var a=n("f9b8"),r=n("c094").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,r)}},"704d":function(t,e,n){var a=n("48e1"),r=n("6eb7"),o=n("e00b"),i=n("163c"),s=n("ba1a"),c=n("24a4"),u=Object.getOwnPropertyDescriptor;e.f=n("4f1d")?u:function(t,e){if(t=o(t),e=i(e,!0),c)try{return u(t,e)}catch(n){}if(s(t,e))return r(!a.f.call(t,e),t[e])}},7378:function(t,e,n){"use strict";var a=n("c8da"),r=n("ba1a"),o=n("f498"),i=n("d545"),s=n("163c"),c=n("3f16"),u=n("62fa").f,l=n("704d").f,d=n("e6bd").f,f=n("98d3").trim,p="Number",g=a[p],m=g,h=g.prototype,b=o(n("565a")(h))==p,v="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():f(e,3);var n,a,r,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+e}for(var i,c=e.slice(2),u=0,l=c.length;u<l;u++)if(i=c.charCodeAt(u),i<48||i>r)return NaN;return parseInt(c,a)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof g&&(b?c(function(){h.valueOf.call(n)}):o(n)!=p)?i(new m(y(e)),n,g):y(e)};for(var I,S=n("4f1d")?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;S.length>N;N++)r(m,I=S[N])&&!r(g,I)&&d(g,I,l(m,I));g.prototype=h,h.constructor=g,n("f57d")(a,p,g)}},"98d3":function(t,e,n){var a=n("a345"),r=n("f1e5"),o=n("3f16"),i=n("1f06"),s="["+i+"]",c="​",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),d=function(t,e,n){var r={},s=o(function(){return!!i[t]()||c[t]()!=c}),u=r[t]=s?e(f):i[t];n&&(r[n]=u),a(a.P+a.F*s,"String",r)},f=d.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=d},"9cf8":function(t,e,n){"use strict";n("b726");var a={size:20,totalCount:100,totalPage:1},r={data:function(){return{pageParams:a,currentPage:1}},methods:{setPage:function(t){this.pageParams.totalCount=t.totalCount,this.pageParams.totalPage=t.totalPage},handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.currentPage=t}},watch:{currentPage:function(){this.search()}}};e["a"]=r},b451:function(t,e,n){var a=n("27e0"),r=n("2724"),o=function(t,e){if(r(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("6333")(Function.call,n("704d").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:o}},b726:function(t,e,n){"use strict";var a=n("2724"),r=n("39e4"),o=n("e76c");n("224e")("search",1,function(t,e,n,i){return[function(n){var a=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,a):new RegExp(n)[e](String(a))},function(t){var e=i(n,t,this);if(e.done)return e.value;var s=a(t),c=String(this),u=s.lastIndex;r(u,0)||(s.lastIndex=0);var l=o(s,c);return r(s.lastIndex,u)||(s.lastIndex=u),null===l?-1:l.index}]})},cab9:function(t,e,n){"use strict";var a=n("d86c"),r=n.n(a);r.a},d3f4:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[t._v("企业名称："+t._s(t.companyName))])]),n("div",{},[n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.addServes}},[t._v("服务单新增")]),n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){t.outerVisible=!0}}},[t._v("服务单导入")])],1)]),n("el-main",[n("el-table",{attrs:{data:t.servesInfoList}},[n("el-table-column",{attrs:{prop:"id",align:"center",label:"服务单ID"}}),n("el-table-column",{attrs:{prop:"userName",align:"center",label:"被服务人姓名"}}),n("el-table-column",{attrs:{prop:"mobile",align:"center",label:"被服务人电话"}}),n("el-table-column",{attrs:{prop:"mobile",align:"center",label:"关联权益人"}}),n("el-table-column",{attrs:{prop:"mobile",align:"center",label:"所属商品"}}),n("el-table-column",{attrs:{prop:"beginTimeValue",align:"center",label:"生效起期"}}),n("el-table-column",{attrs:{prop:"endTimeValue",align:"center",label:"生效至期"}}),n("el-table-column",{attrs:{prop:"statusValue",align:"center",label:"生效状态"}}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.edit(e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.del(e.row)}}},[t._v("删除")])]}}])})],1),n("div",{staticClass:"demonstration-box"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageParams.size,layout:"total, prev, pager, next",total:t.pageParams.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1),n("el-dialog",{attrs:{title:"服务单导入",visible:t.outerVisible},on:{"update:visible":function(e){t.outerVisible=e}}},[n("el-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"import"},[n("span",[t._v("商品列表：")]),n("el-select",{staticClass:"com-input",attrs:{placeholder:"全部"},model:{value:t.goodsId,callback:function(e){t.goodsId=e},expression:"goodsId"}},t._l(t.goodsList,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t.goodsList.length<1?n("span",{staticClass:"red"},[t._v("请先新建商品")]):t._e(),t.goodsId?n("div",{staticClass:"file"},[n("button",{staticClass:"el-button btn el-button--primary",attrs:{"data-v-2ed252dc":"",type:"button"}},[n("label",{attrs:{for:"textFile"}},[t._v("导入文件")]),n("input",{staticClass:"serverInput",attrs:{type:"file",id:"textFile"},on:{change:t.importServes}})])]):t._e()],1)])],1)],1)},r=[],o=(n("3f87"),n("7378"),n("b726"),n("9cf8")),i=n("3ebc"),s=(n("dd36"),n("5ee4")),c={name:"servesList",mixins:[o["a"]],data:function(){return{companyName:this.$route.query.companyName,id:this.$route.query.id,servesInfoList:[],goodsList:[],goodsId:"",loading:!1,outerVisible:!1,currentPage:1}},created:function(){this.dataInit(),this.search()},methods:{dataInit:function(){var t=this;Object(i["e"])(this.id,function(e){t.goodsList=e.list})},importServes:function(t){var e=this;this.loading=!0;var n=t.target.files[0],a=new FormData;a.append("file",n),a.append("goodsId",this.goodsId),this.api.post("/order/import",a).then(function(t){e.loading=!1,e.search(),e.$message(t.data),e.outerVisible=!1}).catch(function(t){e.loading=!1,e.$message(t.statusText)})},addServes:function(){this.$router.push("addOrEditServe?type=add&companyName="+this.companyName+"&companyId="+this.id)},edit:function(t){this.$router.push("addOrEditServe?type=edit&id="+t.id+"&companyName="+this.companyName+"&companyId="+this.id)},del:function(t){var e=this;this.axios.delete("/order/".concat(t.id)).then(function(t){e.search(),e.$message(t.data.data)}).catch(function(t){e.$message(t.statusText)})},getStatusValue:function(t){var e="";switch(t){case"0":e="正常";break;case"1":e="中止";break;case"2":e="终止";break;case"3":e="失效";break}return e},search:function(){var t=this,e={companyid:this.id,page:this.currentPage-1,size:20};this.axios.get("/order?"+s.stringify(e)).then(function(e){var n=Number(e.data.code);200===n?(t.servesInfoList=e.data.data.list,t.servesInfoList.forEach(function(e,n){t.servesInfoList[n].beginTimeValue=t.timeFormater(e.beginTime).format("YYYY-MM-DD"),t.servesInfoList[n].endTimeValue=t.timeFormater(e.endTime).format("YYYY-MM-DD"),t.servesInfoList[n].statusValue=t.getStatusValue(String(e.status))}),t.setPage(e.data.data)):t.$message(t.mes.busy)}).catch(function(e){console.log(e),t.$message(t.mes.busy)})}}},u=c,l=(n("cab9"),n("048f")),d=Object(l["a"])(u,a,r,!1,null,"e8aa8388",null);d.options.__file="servesList.vue";e["default"]=d.exports},d545:function(t,e,n){var a=n("27e0"),r=n("b451").set;t.exports=function(t,e,n){var o,i=e.constructor;return i!==n&&"function"==typeof i&&(o=i.prototype)!==n.prototype&&a(o)&&r&&r(t,o),t}},d86c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-79371dfd.46e085e7.js.map