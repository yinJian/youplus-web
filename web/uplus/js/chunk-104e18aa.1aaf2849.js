(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-104e18aa"],{"09fb":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"addUser"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"170px"}},[r("el-form-item",{attrs:{label:"所属企业",prop:"companyId"}},[r("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择"},on:{change:e.getProduct},model:{value:e.ruleForm.companyId,callback:function(t){e.$set(e.ruleForm,"companyId",t)},expression:"ruleForm.companyId"}},e._l(e.companyList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),r("el-form-item",{attrs:{label:"所属商品",prop:"ptGoodsId"}},[r("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择所属商品",disabled:!e.ruleForm.companyId},model:{value:e.ruleForm.ptGoodsId,callback:function(t){e.$set(e.ruleForm,"ptGoodsId",t)},expression:"ruleForm.ptGoodsId"}},e._l(e.goodsList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),e.goodsList.length<1?r("span",{staticClass:"red"},[e._v("  "+e._s(e.goodsTip))]):e._e()],1),r("el-form-item",{attrs:{label:"被服务人姓名",prop:"userName"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入被服务人姓名"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),r("el-form-item",{attrs:{label:"被服务人性别",prop:"sex"}},[r("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择"},model:{value:e.ruleForm.sex,callback:function(t){e.$set(e.ruleForm,"sex",t)},expression:"ruleForm.sex"}},e._l(e.sexList,function(e){return r("el-option",{key:e.id,attrs:{label:e.dValue,value:e.dKey}})}))],1),r("el-form-item",{attrs:{label:"被服务人证件类型",prop:"paperType"}},[r("el-select",{staticClass:"select-width",attrs:{placeholder:"请选择"},model:{value:e.ruleForm.paperType,callback:function(t){e.$set(e.ruleForm,"paperType",t)},expression:"ruleForm.paperType"}},e._l(e.paperTypeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.dValue,value:e.dKey}})}))],1),r("el-form-item",{attrs:{label:"被服务人证件号码",prop:"paper"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入被服务人证件号码"},model:{value:e.ruleForm.paper,callback:function(t){e.$set(e.ruleForm,"paper",t)},expression:"ruleForm.paper"}})],1),r("el-form-item",{attrs:{label:"被服务人电话号码",prop:"mobile"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入被服务人电话号码"},model:{value:e.ruleForm.mobile,callback:function(t){e.$set(e.ruleForm,"mobile",t)},expression:"ruleForm.mobile"}})],1),r("el-form-item",{attrs:{label:"被服务人电子邮件",prop:"email"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入被服务人电子邮件"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:"保单号/服务单号",prop:"cardNum"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入保单号/服务单号"},model:{value:e.ruleForm.cardNum,callback:function(t){e.$set(e.ruleForm,"cardNum",t)},expression:"ruleForm.cardNum"}})],1),r("el-form-item",{attrs:{label:"生效起期",prop:"beginTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.beginTime,callback:function(t){e.$set(e.ruleForm,"beginTime",t)},expression:"ruleForm.beginTime"}})],1),r("el-form-item",{attrs:{label:"生效止期",prop:"endTime"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.endTime,callback:function(t){e.$set(e.ruleForm,"endTime",t)},expression:"ruleForm.endTime"}})],1),r("el-form-item",{attrs:{label:"特别约定",prop:"remark"}},[r("el-input",{staticClass:"input-width",attrs:{type:"textarea",rows:2,size:"medium",placeholder:"请输入内容"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1),r("el-form-item",{attrs:{label:"保单状态",prop:"state"}},[r("el-radio-group",{model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},[r("el-radio",{attrs:{label:"0"}},[e._v("正常")]),r("el-radio",{attrs:{label:"1"}},[e._v("中止")]),r("el-radio",{attrs:{label:"2"}},[e._v("终止")]),r("el-radio",{attrs:{label:"3"}},[e._v("失效")])],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),r("el-button",{on:{click:e.cancle}},[e._v("取消")])],1)],1)],1)},a=[],o=(r("cadf"),r("551c"),r("097d"),r("3ebc")),i=r("d48e"),s=r("fc37"),l=["请先选择所属企业信息","请先新建商品信息"],u={name:"addUser",data:function(){return{ruleForm:{companyId:"",ptGoodsId:"",userName:"",sex:"",paperType:"1",paper:"",mobile:"",email:"",cardNum:"",beginTime:"",endTime:"",remark:"",state:"0"},rules:{companyId:[{required:!0,message:"请选择所属企业",trigger:"change"}],ptGoodsId:[{required:!0,message:"请选择所属商品",trigger:"change"}],userName:[{required:!0,message:"请输入被服务人姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择被服务人性别",trigger:"change"}],paperType:[{required:!0,message:"请选择被服务人证件类型",trigger:"change"}],paper:[{required:!0,message:"请输入被服务人证件号码",trigger:"blur"}],mobile:[{required:!0,message:"请输入被服务人电话号码",trigger:"blur"}]},companyList:"",goodsList:[],goodsTip:l[0],sexList:o["m"],paperTypeList:o["k"],check:i["a"].methods.check,checkTip:i["a"].tips.checkTip}},mounted:function(){this.editInit()},methods:{editInit:function(){var e=this;Object(o["d"])(function(t){e.companyList=t.list})},submit:function(){var e=this;this.ruleForm.beginTime=Object(s["a"])(this.ruleForm.beginTime),this.ruleForm.endTime=Object(s["a"])(this.ruleForm.endTime),this.$refs["ruleForm"].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.addUser(e.ruleForm)})},addUser:function(e){var t=this;if("edit"===this.$route.query.type)return this.editUser(e);this.loading=!0,this.api.post("/customer",e).then(function(e){t.$router.go(-1),t.loading=!1}).catch(function(e){console.log(e),t.loading=!1,t.$message(e.data.message)})},getProduct:function(){var e=this;this.ruleForm.ptGoodsId="",Object(o["e"])(this.ruleForm.companyId,function(t){if(e.goodsList=t.list,t.list.length<1)return e.goodsTip=l[1]})},cancle:function(){this.$router.go(-1)}}},c=u,d=(r("9838"),r("2877")),p=Object(d["a"])(c,n,a,!1,null,"06589098",null);p.options.__file="addUser.vue";t["default"]=p.exports},"0bfb":function(e,t,r){"use strict";var n=r("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"28a5":function(e,t,r){r("214f")("split",2,function(e,t,n){"use strict";var a=r("aae3"),o=n,i=[].push,s="split",l="length",u="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[l]||2!="ab"[s](/(?:ab)*/)[l]||4!="."[s](/(.?)(.?)/)[l]||"."[s](/()()/)[l]>1||""[s](/.?/)[l]){var c=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!a(e))return o.call(r,e,t);var n,s,d,p,m,f=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,b=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,g+"g");c||(n=new RegExp("^"+v.source+"$(?!\\s)",g));while(s=v.exec(r)){if(d=s.index+s[0][l],d>h&&(f.push(r.slice(h,s.index)),!c&&s[l]>1&&s[0].replace(n,function(){for(m=1;m<arguments[l]-2;m++)void 0===arguments[m]&&(s[m]=void 0)}),s[l]>1&&s.index<r[l]&&i.apply(f,s.slice(1)),p=s[0][l],h=d,f[l]>=b))break;v[u]===s.index&&v[u]++}return h===r[l]?!p&&v.test("")||f.push(""):f.push(r.slice(h)),f[l]>b?f.slice(0,b):f}}else"0"[s](void 0,0)[l]&&(n=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(r,a){var o=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,o,a):n.call(String(o),r,a)},n]})},3846:function(e,t,r){r("9e1e")&&"g"!=/./g.flags&&r("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:r("0bfb")})},"3ebc":function(e,t,r){"use strict";r.d(t,"b",function(){return p}),r.d(t,"c",function(){return m}),r.d(t,"i",function(){return f}),r.d(t,"l",function(){return g}),r.d(t,"a",function(){return k}),r.d(t,"f",function(){return s}),r.d(t,"g",function(){return l}),r.d(t,"d",function(){return u}),r.d(t,"e",function(){return c}),r.d(t,"n",function(){return h}),r.d(t,"o",function(){return T}),r.d(t,"p",function(){return b}),r.d(t,"q",function(){return v}),r.d(t,"j",function(){return w}),r.d(t,"h",function(){return F}),r.d(t,"m",function(){return x}),r.d(t,"k",function(){return y});var n=r("2ef0"),a=r.n(n),o=r("7c15");function i(e){return a.a.sortBy(e,function(e){return e.sortId})}function s(e){return o["a"].get("/role").then(function(t){return e&&e(t.data),t.data}).catch(function(e){console.log(e)}),[]}function l(e){return o["a"].get("/user").then(function(t){var r={id:"",name:"全部",roleId:""};return t.data.unshift(r),e&&e(t.data),t.data}).catch(function(e){console.log(e)}),[]}function u(e){return o["a"].get("/company?page=0&size=1000").then(function(t){var r={id:"",name:"全部"};return t.data.list.unshift(r),e&&e(t.data),t.data}).catch(function(e){console.log(e)}),[]}function c(e,t){if(e)return o["a"].get("/goods?companyId=".concat(e,"&page=0&size=1000")).then(function(e){return t&&t(e.data),e.data}).catch(function(e){console.log(e)}),[]}function d(e){var t={dKey:"",id:"",dValue:"全部"};return e.unshift(t),e}var p=i(JSON.parse(sessionStorage.departmentList)),m=i(JSON.parse(sessionStorage.doctorTitleList)),f=i(JSON.parse(sessionStorage.hosLevelList)),g=i(JSON.parse(sessionStorage.propertyList)),h=i(JSON.parse(sessionStorage.skillTagList)),b=i(JSON.parse(sessionStorage.subDepartmentList)),v=i(JSON.parse(sessionStorage.typeList)),y=i(JSON.parse(sessionStorage.paperTypeList)),F=i(JSON.parse(sessionStorage.hopType)),k=JSON.parse(sessionStorage.addressProvince);v=d(v),m=d(m),f=d(f),g=d(g),h=d(h),y=d(y),F=d(F);var x=[{id:1,dKey:1,dValue:"男"},{id:0,dKey:0,dValue:"女"}],T=[{id:0,dKey:0,dValue:"启用"},{id:-1,dKey:-1,dValue:"停用"}],w=[{id:"1234560",dKey:!0,dValue:"是"},{id:"1234567",dKey:!1,dValue:"否"}]},"6b54":function(e,t,r){"use strict";r("3846");var n=r("cb7c"),a=r("0bfb"),o=r("9e1e"),i="toString",s=/./[i],l=function(e){r("2aba")(RegExp.prototype,i,e,!0)};r("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?a.call(e):void 0)}):s.name!=i&&l(function(){return s.call(this)})},"7b89":function(e,t,r){},9838:function(e,t,r){"use strict";var n=r("7b89"),a=r.n(n);a.a},aae3:function(e,t,r){var n=r("d3f4"),a=r("2d95"),o=r("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},d48e:function(e,t,r){"use strict";r("cadf"),r("551c"),r("097d");t["a"]={methods:{check:function(e,t){var r=this;return new Promise(function(n,a){r.lodash.some(t,function(t){e[t]||r.lodash.isBoolean(e[t])||0==e[t]||a()}),n()})}},tips:{checkTip:"请补全信息后提交"}}},fc37:function(e,t,r){"use strict";r.d(t,"f",function(){return s}),r.d(t,"a",function(){return l}),r.d(t,"b",function(){return u}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return d}),r.d(t,"c",function(){return p});r("7f7f"),r("6b54"),r("28a5");var n=r("2ef0"),a=r.n(n),o=r("bc3a"),i=r.n(o);function s(e){if(!e)return"";var t=new Date(e).getFullYear(),r=new Date(e).getMonth()+1,n=new Date(e).getDate();return r<10&&(r="0"+parseInt(r)),n<10&&(n="0"+parseInt(n)),"".concat(t,"-").concat(r,"-").concat(n)}function l(e){if(!e)return"";var t=e.getFullYear(),r=e.getMonth(),n=e.getDate();return r<10&&(r="0"+parseInt(r)),n<10&&(n="0"+parseInt(n)),"".concat(t,"-").concat(r,"-").concat(n)}function u(e){if(!e)return"";var t=e.getHours(),r=e.getMinutes();return t<10&&(t="0"+parseInt(t)),r<10&&(r="0"+parseInt(r)),"".concat(t,"：").concat(r)}function c(e){return e?a.a.map(e.split("-"),function(e){var t=e.split("：")[0],r=e.split("：")[1],n=(new Date).getFullYear(),a=(new Date).getMonth(),o=(new Date).getDay();return t=t.trim(),r=r.trim(),new Date(n,a,o,t,r)}):""}function d(e,t){e=e||"0",t=t||"code",e=e.toString();var r=[{code:"0",name:"启用"},{code:"-1",name:"停用"}],n=a.a.filter(r,function(r){return r[t]===e})||r;return n}function p(e,t){if(e){var r=e.target.files[0];if(r){var n=new FormData;n.append("chunk","0"),n.append("chunks","1"),n.append("file",r,r.name);var a={headers:{"Content-Type":"multipart/form-data"}};i.a.get("/weChat/qiniu/token").then(function(e){var r=e.data.data;n.append("token",r),m(n,a,t)})}}}function m(e,t,r){i.a.post("http://upload-z1.qiniup.com/",e,t).then(function(e){var t={message:"ok",url:"http://qiniu1.tianyalei.com/".concat(e.data.key)};r&&r(t)}).catch(function(e){console.log(e,"pppp")})}}}]);
//# sourceMappingURL=chunk-104e18aa.1aaf2849.js.map