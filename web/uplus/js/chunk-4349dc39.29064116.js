(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4349dc39"],{"0bfb":function(t,e,n){"use strict";var a=n("cb7c");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0c9d":function(t,e,n){},"11e9":function(t,e,n){var a=n("52a7"),i=n("4630"),r=n("6821"),o=n("6a99"),s=n("69a8"),c=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=r(t),e=o(e,!0),c)try{return u(t,e)}catch(n){}if(s(t,e))return i(!a.f.call(t,e),t[e])}},2880:function(t,e,n){"use strict";var a=n("0c9d"),i=n.n(a);i.a},"28a5":function(t,e,n){n("214f")("split",2,function(t,e,a){"use strict";var i=n("aae3"),r=a,o=[].push,s="split",c="length",u="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[c]||2!="ab"[s](/(?:ab)*/)[c]||4!="."[s](/(.?)(.?)/)[c]||"."[s](/()()/)[c]>1||""[s](/.?/)[c]){var l=void 0===/()??/.exec("")[1];a=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return r.call(n,t,e);var a,s,d,f,p,g=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,v=void 0===e?4294967295:e>>>0,b=new RegExp(t.source,h+"g");l||(a=new RegExp("^"+b.source+"$(?!\\s)",h));while(s=b.exec(n)){if(d=s.index+s[0][c],d>m&&(g.push(n.slice(m,s.index)),!l&&s[c]>1&&s[0].replace(a,function(){for(p=1;p<arguments[c]-2;p++)void 0===arguments[p]&&(s[p]=void 0)}),s[c]>1&&s.index<n[c]&&o.apply(g,s.slice(1)),f=s[0][c],m=d,g[c]>=v))break;b[u]===s.index&&b[u]++}return m===n[c]?!f&&b.test("")||g.push(""):g.push(n.slice(m)),g[c]>v?g.slice(0,v):g}}else"0"[s](void 0,0)[c]&&(a=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)});return[function(n,i){var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r,i):a.call(String(r),n,i)},a]})},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"386d":function(t,e,n){n("214f")("search",1,function(t,e,n){return[function(n){"use strict";var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a):new RegExp(n)[e](String(a))},n]})},"3ebc":function(t,e,n){"use strict";n.d(e,"b",function(){return f}),n.d(e,"c",function(){return p}),n.d(e,"i",function(){return g}),n.d(e,"l",function(){return h}),n.d(e,"a",function(){return I}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return c}),n.d(e,"d",function(){return u}),n.d(e,"e",function(){return l}),n.d(e,"n",function(){return m}),n.d(e,"o",function(){return _}),n.d(e,"p",function(){return v}),n.d(e,"q",function(){return b}),n.d(e,"j",function(){return x}),n.d(e,"h",function(){return S}),n.d(e,"m",function(){return w}),n.d(e,"k",function(){return y});n("cadf"),n("551c"),n("097d");var a=n("2ef0"),i=n.n(a),r=n("7c15");function o(t){return i.a.sortBy(t,function(t){return t.sortId})}function s(t){return r["a"].get("/role").then(function(e){return t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function c(t){return r["a"].get("/user").then(function(e){var n={id:"",name:"全部",roleId:""};return e.data.unshift(n),t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function u(t){return r["a"].get("/company?page=0&size=1000").then(function(e){var n={id:"",name:"全部"};return e.data.list.unshift(n),t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function l(t,e){if(t)return r["a"].get("/goods?companyId=".concat(t,"&page=0&size=1000")).then(function(t){return e&&e(t.data),t.data}).catch(function(t){console.log(t)}),[]}function d(t){var e={dKey:"",id:"",dValue:"全部"};return t.unshift(e),t}var f=o(JSON.parse(sessionStorage.departmentList)),p=o(JSON.parse(sessionStorage.doctorTitleList)),g=o(JSON.parse(sessionStorage.hosLevelList)),h=o(JSON.parse(sessionStorage.propertyList)),m=o(JSON.parse(sessionStorage.skillTagList)),v=o(JSON.parse(sessionStorage.subDepartmentList)),b=o(JSON.parse(sessionStorage.typeList)),y=o(JSON.parse(sessionStorage.paperTypeList)),S=o(JSON.parse(sessionStorage.hopType)),I=JSON.parse(sessionStorage.addressProvince);b=d(b),p=d(p),g=d(g),h=d(h),m=d(m),y=d(y),S=d(S);var w=[{id:1,dKey:1,dValue:"男"},{id:0,dKey:0,dValue:"女"}],_=[{id:0,dKey:0,dValue:"启用"},{id:-1,dKey:-1,dValue:"停用"}],x=[{id:"1234560",dKey:!0,dValue:"是"},{id:"1234567",dKey:!1,dValue:"否"}]},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5dbc":function(t,e,n){var a=n("d3f4"),i=n("8b97").set;t.exports=function(t,e,n){var r,o=e.constructor;return o!==n&&"function"==typeof o&&(r=o.prototype)!==n.prototype&&a(r)&&i&&i(t,r),t}},"6b54":function(t,e,n){"use strict";n("3846");var a=n("cb7c"),i=n("0bfb"),r=n("9e1e"),o="toString",s=/./[o],c=function(t){n("2aba")(RegExp.prototype,o,t,!0)};n("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?c(function(){var t=a(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?i.call(t):void 0)}):s.name!=o&&c(function(){return s.call(this)})},"70bc":function(t,e,n){},"8b97":function(t,e,n){var a=n("d3f4"),i=n("cb7c"),r=function(t,e){if(i(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return r(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:r}},9093:function(t,e,n){var a=n("ce10"),i=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,i)}},"9cf8":function(t,e,n){"use strict";n("386d");var a={size:20,totalCount:100,totalPage:1},i={data:function(){return{pageParams:a,currentPage:1}},methods:{setPage:function(t){this.pageParams.totalCount=t.totalCount,this.pageParams.totalPage=t.totalPage},handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.currentPage=t}},watch:{currentPage:function(){this.search()}}};e["a"]=i},aa77:function(t,e,n){var a=n("5ca1"),i=n("be13"),r=n("79e5"),o=n("fdef"),s="["+o+"]",c="​",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),d=function(t,e,n){var i={},s=r(function(){return!!o[t]()||c[t]()!=c}),u=i[t]=s?e(f):o[t];n&&(i[n]=u),a(a.P+a.F*s,"String",i)},f=d.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=d},aae3:function(t,e,n){var a=n("d3f4"),i=n("2d95"),r=n("2b4c")("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==i(t))}},c5f6:function(t,e,n){"use strict";var a=n("7726"),i=n("69a8"),r=n("2d95"),o=n("5dbc"),s=n("6a99"),c=n("79e5"),u=n("9093").f,l=n("11e9").f,d=n("86cc").f,f=n("aa77").trim,p="Number",g=a[p],h=g,m=g.prototype,v=r(n("2aeb")(m))==p,b="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():f(e,3);var n,a,i,r=e.charCodeAt(0);if(43===r||45===r){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+e}for(var o,c=e.slice(2),u=0,l=c.length;u<l;u++)if(o=c.charCodeAt(u),o<48||o>i)return NaN;return parseInt(c,a)}}return+e};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof g&&(v?c(function(){m.valueOf.call(n)}):r(n)!=p)?o(new h(y(e)),n,g):y(e)};for(var S,I=n("9e1e")?u(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;I.length>w;w++)i(h,S=I[w])&&!i(g,S)&&d(g,S,l(h,S));g.prototype=m,m.constructor=g,n("2aba")(a,p,g)}},d3f46:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("div",{staticClass:"header"},[n("div",{staticClass:"title"},[t._v("企业名称："+t._s(t.companyName))])]),n("div",{},[n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.addServes}},[t._v("服务单新增")]),n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){t.outerVisible=!0}}},[t._v("服务单导入")]),n("a",{attrs:{href:"",download:"服务单导入模版.cvs"}},[t._v("服务单导入模版")])],1)]),n("el-main",[n("el-table",{attrs:{data:t.servesInfoList}},[n("el-table-column",{attrs:{prop:"id",align:"center",label:"服务单ID"}}),n("el-table-column",{attrs:{prop:"userName",align:"center",label:"被服务人姓名"}}),n("el-table-column",{attrs:{prop:"mobile",align:"center",label:"被服务人电话",width:"120"}}),n("el-table-column",{attrs:{prop:"relationUserName",align:"center",label:"关联权益人"}}),n("el-table-column",{attrs:{prop:"goodsName",align:"center",label:"所属商品"}}),n("el-table-column",{attrs:{prop:"beginTimeValue",align:"center",label:"生效起期",width:"120"}}),n("el-table-column",{attrs:{prop:"endTimeValue",align:"center",label:"生效止期",width:"120"}}),n("el-table-column",{attrs:{prop:"statusValue",align:"center",label:"生效状态"}}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.edit(e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.del(e.row)}}},[t._v("删除")])]}}])})],1),n("div",{staticClass:"demonstration-box"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageParams.size,layout:"total, prev, pager, next",total:t.pageParams.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1),n("delete-info",{attrs:{id:t.deleteId,isShowDelete:t.isShowDelete}}),n("el-dialog",{attrs:{title:"服务单导入",visible:t.outerVisible},on:{"update:visible":function(e){t.outerVisible=e}}},[n("el-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"import"},[n("span",[t._v("商品列表：")]),n("el-select",{staticClass:"com-input",attrs:{placeholder:"全部"},model:{value:t.goodsId,callback:function(e){t.goodsId=e},expression:"goodsId"}},t._l(t.goodsList,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t.goodsList.length<1?n("span",{staticClass:"red"},[t._v("请先新建商品")]):t._e(),t.goodsId?n("div",{staticClass:"file"},[n("label",{attrs:{for:"textFile"}},[t._v("导入文件：")]),n("input",{staticClass:"com-input",attrs:{type:"file",id:"textFile"},on:{change:t.confirm2import}}),n("div",{staticStyle:{"margin-top":"20px","text-align":"center"}},[n("el-button",{on:{click:t.confirm}},[t._v("提交")])],1)]):t._e()],1)])],1)],1)},i=[],r=(n("ac6a"),n("c5f6"),n("386d"),n("cadf"),n("551c"),n("097d"),n("9cf8")),o=n("3ebc"),s=(n("dd36"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{visible:t.isShowDelete},on:{"update:visible":function(e){t.isShowDelete=e}}},[n("div",[n("label",{attrs:{for:""}},[t._v("请输入删除原因:")]),n("el-input",{attrs:{type:"textarea"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),n("div",{staticClass:"mt"},[n("label",{attrs:{for:""}},[t._v("请上传辅助文档：")]),n("input",{ref:"upFiles",attrs:{type:"file",name:"file",id:"upFiles"},on:{change:t.fileChange}})]),n("div",{staticClass:"mt"},[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")]),n("el-button",{on:{click:t.cancle}},[t._v("取消")])],1)])}),c=[],u=n("fc37"),l=n("b383"),d={name:"deleteInfo",data:function(){return{reason:"",files:"",loading:!1}},props:["id","isShowDelete"],methods:{onSubmit:function(){var t=this,e={reason:this.reason,files:this.files};this.axios.delete("/order/".concat(this.id,"?")+l.stringify(e)).then(function(e){t.$message(e.data.data),t.isShowDelete=!1}).catch(function(t){})},cancle:function(){this.isShowDelete=!1},fileChange:function(t){var e=this;this.loading=!0,Object(u["c"])(t,function(t){e.loading=!1,e.files=t.url})},upAction:function(){this.$refs.upFiles.focus(),document.getElementById("upFiles").focus()}},watch:{isShowDelete:function(){this.reason="",this.files="",document.getElementById("upFiles").value=""}}},f=d,p=(n("2880"),n("2877")),g=Object(p["a"])(f,s,c,!1,null,"015db98c",null);g.options.__file="deleteInfo.vue";var h=g.exports,m=n("b383"),v={name:"servesList",mixins:[r["a"]],data:function(){return{companyName:this.$route.query.companyName,id:this.$route.query.id,servesInfoList:[],goodsList:[],goodsId:"",loading:!1,outerVisible:!1,currentPage:1,deleteId:"",isShowDelete:!1,files:""}},components:{deleteInfo:h},created:function(){this.dataInit(),this.search()},methods:{dataInit:function(){var t=this;Object(o["e"])(this.id,function(e){t.goodsList=e.list})},confirm2import:function(t){this.files=t.target.files[0]},confirm:function(){var t=this;this.files?this.$confirm("请确认是否上传","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.importServes()}).catch(function(){t.$message({type:"info",message:"已取消"})}):this.$message("上传文件不能为空！")},importServes:function(){var t=this;this.loading=!0;var e=new FormData;e.append("file",this.files),e.append("goodsId",this.goodsId),this.api.post("/order/import",e).then(function(e){t.loading=!1,t.search(),t.$message(e.data),t.outerVisible=!1}).catch(function(e){t.loading=!1,t.$message(e.statusText)})},addServes:function(){this.$router.push("addOrEditServe?type=add&companyName="+this.companyName+"&companyId="+this.id)},edit:function(t){this.$router.push("addOrEditServe?type=edit&id="+t.id+"&companyName="+this.companyName+"&companyId="+this.id)},del:function(t){this.isShowDelete=!0,this.deleteId=t.id},getStatusValue:function(t){var e="";switch(t=String(t),t){case"-1":e="待审核";break;case"0":e="正常";break;case"-2":e="被拒绝";break;default:e=t;break}return e},search:function(){var t=this,e={companyId:this.id,page:this.currentPage-1,size:20};this.axios.get("/order?"+m.stringify(e)).then(function(e){var n=Number(e.data.code);200===n?(t.servesInfoList=e.data.data.list,t.servesInfoList.forEach(function(e,n){t.servesInfoList[n].beginTimeValue=e.beginTime&&t.timeFormater(e.beginTime).format("YYYY-MM-DD"),t.servesInfoList[n].endTimeValue=e.endTime&&t.timeFormater(e.endTime).format("YYYY-MM-DD"),t.servesInfoList[n].statusValue=t.getStatusValue(String(e.status))}),t.setPage(e.data.data)):t.$message(t.mes.busy)}).catch(function(e){console.log(e),t.$message(t.mes.busy)})}}},b=v,y=(n("fd0a"),Object(p["a"])(b,a,i,!1,null,"0ae0c09a",null));y.options.__file="servesList.vue";e["default"]=y.exports},fc37:function(t,e,n){"use strict";n.d(e,"f",function(){return s}),n.d(e,"a",function(){return c}),n.d(e,"b",function(){return u}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return d}),n.d(e,"c",function(){return f});n("7f7f"),n("6b54"),n("28a5"),n("cadf"),n("551c"),n("097d");var a=n("2ef0"),i=n.n(a),r=n("bc3a"),o=n.n(r);function s(t){if(!t)return"";var e=new Date(t).getFullYear(),n=new Date(t).getMonth(),a=new Date(t).getDate();return n<10&&(n="0"+parseInt(n)),a<10&&(a="0"+parseInt(a)),"".concat(e,"-").concat(n,"-").concat(a)}function c(t){if(!t)return"";var e=t.getFullYear(),n=t.getMonth(),a=t.getDate();return n<10&&(n="0"+parseInt(n)),a<10&&(a="0"+parseInt(a)),"".concat(e,"-").concat(n,"-").concat(a)}function u(t){if(!t)return"";var e=t.getHours(),n=t.getMinutes();return e<10&&(e="0"+parseInt(e)),n<10&&(n="0"+parseInt(n)),"".concat(e,"：").concat(n)}function l(t){return t?i.a.map(t.split("-"),function(t){var e=t.split("：")[0],n=t.split("：")[1],a=(new Date).getFullYear(),i=(new Date).getMonth(),r=(new Date).getDay();return e=e.trim(),n=n.trim(),new Date(a,i,r,e,n)}):""}function d(t,e){t=t||"0",e=e||"code",t=t.toString();var n=[{code:"0",name:"启用"},{code:"-1",name:"停用"}],a=i.a.filter(n,function(n){return n[e]===t})||n;return a}function f(t,e){if(t){var n=t.target.files[0];if(n){var a=new FormData;a.append("chunk","0"),a.append("chunks","1"),a.append("file",n,n.name);var i={headers:{"Content-Type":"multipart/form-data"}};o.a.get("/weChat/qiniu/token").then(function(t){var n=t.data.data;a.append("token",n),p(a,i,e)})}}}function p(t,e,n){o.a.post("http://upload-z1.qiniup.com/",t,e).then(function(t){var e={message:"ok",url:"http://qiniu.tianyalei.com/".concat(t.data.key)};n&&n(e)}).catch(function(t){console.log(t,"pppp")})}},fd0a:function(t,e,n){"use strict";var a=n("70bc"),i=n.n(a);i.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-4349dc39.29064116.js.map