(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-adc6f0d0"],{"0bfb":function(t,e,a){"use strict";var r=a("cb7c");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0c12":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"box"},[a("h3",[t._v(t._s(t.activeheader))]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"医生名称",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"所在地区",prop:"province"}},[a("user-address",{ref:"addDocAddress",attrs:{defaultValue:t.defaultAddress,seletStyle:"width:200px"},on:{countryChange:t.countryChange}})],1),a("el-form-item",{attrs:{label:"所在医院",prop:"hospitalId"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"",placeholder:"请选择",disabled:t.state},model:{value:t.ruleForm.hospitalId,callback:function(e){t.$set(t.ruleForm,"hospitalId",e)},expression:"ruleForm.hospitalId"}},t._l(t.hosName,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),a("span",{staticClass:"hosTip"},[t._v(t._s(t.hosTip))])],1),a("el-form-item",{attrs:{label:"所在科室",prop:"dept"}},[a("el-input",{staticClass:"input-width",staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:t.ruleForm.dept,callback:function(e){t.$set(t.ruleForm,"dept",e)},expression:"ruleForm.dept"}})],1),a("el-form-item",{attrs:{label:"标准科室",prop:"dept1"}},[a("hos-offices",{ref:"addDocOffices",attrs:{defaultValue:t.defaultOffices,seletStyle:"width:200px"},on:{deptChange:t.deptChange}})],1),a("el-form-item",{attrs:{label:"医生职称",prop:"level"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.ruleForm.level,callback:function(e){t.$set(t.ruleForm,"level",e)},expression:"ruleForm.level"}},t._l(t.doctorTitleList,function(t){return a("el-option",{key:t.dKey,attrs:{label:t.dValue,value:t.dKey}})}))],1),a("el-form-item",{attrs:{label:"医生电话",prop:"phone"}},[a("el-input",{staticClass:"input-width",staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone",e)},expression:"ruleForm.phone"}})],1),a("el-form-item",{attrs:{label:"医生头像"}},[t.ruleForm.headIcon?t._e():a("div",{staticClass:"avatar-uploader"},[a("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[a("label",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{for:"upPhoto"}}),a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"upPhoto"},on:{change:t.fileChange}})])]),t.ruleForm.headIcon?a("img",{staticClass:"avatar",attrs:{src:t.ruleForm.headIcon}}):t._e(),t.ruleForm.headIcon?a("span",{staticClass:"photoDel",on:{click:t.delPhoto}},[t._v("删除")]):t._e()]),a("el-form-item",{attrs:{label:"身份证号",prop:"paper"}},[a("el-input",{staticClass:"input-width",staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.ruleForm.paper,callback:function(e){t.$set(t.ruleForm,"paper",e)},expression:"ruleForm.paper"}})],1),a("el-form-item",{attrs:{label:"身份证号正面"}},[t.paperPics2?t._e():a("div",{staticClass:"avatar-uploader"},[a("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[a("label",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{for:"upPhoto"}}),a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"upPhoto"},on:{change:t.fileChange2}})])]),t.paperPics2?a("img",{staticClass:"avatar",attrs:{src:t.paperPics2}}):t._e(),t.paperPics2?a("span",{staticClass:"photoDel",on:{click:t.delPhoto2}},[t._v("删除")]):t._e()]),a("el-form-item",{attrs:{label:"身份证号反面"}},[t.paperPics3?t._e():a("div",{staticClass:"avatar-uploader"},[a("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[a("label",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{for:"upPhoto"}}),a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"upPhoto"},on:{change:t.fileChange3}})])]),t.paperPics3?a("img",{staticClass:"avatar",attrs:{src:t.paperPics3}}):t._e(),t.paperPics3?a("span",{staticClass:"photoDel",on:{click:t.delPhoto3}},[t._v("删除")]):t._e()]),a("el-form-item",{attrs:{label:"执业医师证"}},[t.ruleForm.doctorPic?t._e():a("div",{staticClass:"avatar-uploader"},[a("div",{staticClass:"el-upload el-upload--text",attrs:{tabindex:"0"}},[a("label",{staticClass:"el-icon-plus avatar-uploader-icon",attrs:{for:"upPhoto"}}),a("input",{staticClass:"el-upload__input",attrs:{type:"file",name:"file",id:"upPhoto"},on:{change:t.fileChange4}})])]),t.ruleForm.doctorPic?a("img",{staticClass:"avatar",attrs:{src:t.ruleForm.doctorPic}}):t._e(),t.ruleForm.doctorPic?a("span",{staticClass:"photoDel",on:{click:t.delPhoto4}},[t._v("删除")]):t._e()]),a("el-form-item",{attrs:{label:"开户行",prop:"bank"}},[a("el-input",{staticClass:"input-width",staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:t.ruleForm.bank,callback:function(e){t.$set(t.ruleForm,"bank",e)},expression:"ruleForm.bank"}})],1),a("el-form-item",{attrs:{label:"银行账号",prop:"bankCardNum"}},[a("el-input",{staticClass:"input-width",staticStyle:{width:"400px"},attrs:{placeholder:"请输入内容"},model:{value:t.ruleForm.bankCardNum,callback:function(e){t.$set(t.ruleForm,"bankCardNum",e)},expression:"ruleForm.bankCardNum"}})],1),a("el-form-item",[a("el-checkbox",{attrs:{label:"true"},model:{value:t.ruleForm.youplusDoctor,callback:function(e){t.$set(t.ruleForm,"youplusDoctor",e)},expression:"ruleForm.youplusDoctor"}},[t._v("优加医生")])],1),a("el-form-item",{attrs:{label:"医生简介",prop:"info"}},[a("el-input",{attrs:{type:"textarea",rows:2,size:"medium",placeholder:"请输入内容"},model:{value:t.ruleForm.info,callback:function(e){t.$set(t.ruleForm,"info",e)},expression:"ruleForm.info"}})],1),a("el-form-item",{attrs:{label:"医生擅长",prop:"skill"}},[a("el-input",{attrs:{type:"textarea",rows:2,size:"medium",placeholder:"请输入内容"},model:{value:t.ruleForm.skill,callback:function(e){t.$set(t.ruleForm,"skill",e)},expression:"ruleForm.skill"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:2,size:"medium",placeholder:"请输入内容"},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),a("el-button",{on:{click:t.cancle}},[t._v("取消")])],1)],1)],1)])},i=[],n=(a("28a5"),a("3ebc")),o=a("fc37"),s=a("d48e"),l=a("65b8"),c=a("de99"),u=a("b383"),d=a.n(u),p=["新增医生","修改医生信息"],f=["请先选择地区","该地区没有对应医院信息，请先新建医院"],h={name:"addDoc",data:function(){return{ruleForm:{name:"",dept:"",hospitalId:"",level:"",headIcon:"",phone:"",info:"",skill:"",remark:"",province:"",city:"",country:"",dept1:"",dept2:"",youplusDoctor:"",paper:"",paperPics:"",doctorPic:"",bank:"",bankCardNum:""},paperPics2:"",paperPics3:"",rules:{name:[{required:!0,message:"请输入医生名称",trigger:"blur"}],hospitalId:[{required:!0,message:"请选择所在医院",trigger:"change"}],level:[{required:!0,message:"请选择医生职称",trigger:"change"}],dept1:[{required:!0,message:"请选择标准科室",trigger:"change"}],province:[{required:!0,message:"请选择所在地区",trigger:"change"}],phone:[{required:!0,message:"请输入医生电话",trigger:"blur"}]},loading:!1,id:"",hosTip:f[0],state:!0,defaultAddress:null,defaultOffices:null,activeheader:p[0],check:s["a"].methods.check,checkTip:s["a"].tips.checkTip,doctorTitleList:n["c"],hosName:[]}},components:{UserAddress:l["a"],HosOffices:c["a"]},mounted:function(){this.editInit()},methods:{fileChange:function(t){var e=this;this.loading=!0,Object(o["c"])(t,function(t){e.loading=!1,e.ruleForm.headIcon=t.url})},fileChange2:function(t){var e=this;this.loading=!0,Object(o["c"])(t,function(t){e.loading=!1,e.paperPics2=t.url})},fileChange3:function(t){var e=this;this.loading=!0,Object(o["c"])(t,function(t){e.loading=!1,e.paperPics3=t.url})},fileChange4:function(t){var e=this;this.loading=!0,Object(o["c"])(t,function(t){e.loading=!1,e.ruleForm.doctorPic=t.url})},delPhoto:function(){this.ruleForm.headIcon=""},delPhoto2:function(){this.paperPics2=""},delPhoto3:function(){this.paperPics3=""},delPhoto4:function(){this.ruleForm.doctorPic=""},editInit:function(){var t=this,e=this.$route.query,a=e.type,r=e.id;this.api.get("/hospital").then(function(e){if(t.hosName=e.data.list,t.hosName.length<1)return t.state=!0,t.hosTip=f[1];t.state=!1,t.hosTip=""}).catch(function(e){console.log(e),t.$message(e.message)}),"edit"==a&&(this.activeheader=p[1]),r&&(this.loading=!0,this.api.get("/doctor/".concat(r)).then(function(e){t.ruleForm=e.data;var a=n["c"].filter(function(e){return e.dValue==t.ruleForm.level});a.length>0&&(t.ruleForm.level=a[0].dKey),t.hosTip="",t.defaultAddress={province:t.ruleForm.province,city:t.ruleForm.city,country:t.ruleForm.country},t.defaultOffices={dept1:t.ruleForm.dept1,dept2:t.ruleForm.dept2},t.ruleForm.paperPics&&(t.paperPics2=t.ruleForm.paperPics.split(",")[0],t.paperPics3=t.ruleForm.paperPics.split(",")[1]),setTimeout(function(){t.loading=!1},20)}).catch(function(e){console.log(e),t.loading=!1,t.$message(e.message)}))},handleAvatarSuccess:function(t,e){this.ruleForm.headIcon=URL.createObjectURL(e.raw)},countryChange:function(t){var e=this,a=this.$refs.addDocAddress.getData();this.ruleForm.province=a.province,this.ruleForm.city=a.city,this.ruleForm.country=a.country;var r=d.a.stringify(t);this.api.get("/hospital?".concat(r)).then(function(t){if(e.hosName=t.data.list,e.hosName.length<1)return e.state=!0,e.hosTip=f[1];e.state=!1,e.hosTip=""}).catch(function(t){console.log(t),e.$message(t.message)})},deptChange:function(){var t=this.$refs.addDocOffices.getData();this.ruleForm.dept1=t.dept1,this.ruleForm.dept2=t.dept2},submit:function(){var t=this;this.ruleForm.paperPics=this.paperPics2+","+this.paperPics3;var e=this.$refs.addDocAddress.getData(),a=this.$refs.addDocOffices.getData();this.ruleForm.province=e.province,this.ruleForm.city=e.city,this.ruleForm.country=e.country,this.ruleForm.dept1=a.dept1,this.ruleForm.dept2=a.dept2,this.$refs["ruleForm"].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.addUser(t.ruleForm)})},editUser:function(t){var e=this;t.id=this.ruleForm.id,this.api.put("/doctor",t,"form").then(function(t){e.$router.go(-1)}).catch(function(t){console.log(t),e.$message(t.data.message)})},addUser:function(t){var e=this;if("edit"==this.$route.query.type)return this.editUser(t);this.api.post("/doctor",t,"form").then(function(t){e.$router.go(-1)}).catch(function(t){console.log(t),e.$message(t.data.message)})},cancle:function(){this.$router.go(-1)}}},m=h,v=(a("ca67"),a("2877")),g=Object(v["a"])(m,r,i,!1,null,"698f692e",null);g.options.__file="addDoc.vue";e["default"]=g.exports},"0ccb":function(t,e,a){"use strict";var r=a("5414"),i=a.n(r);i.a},"0e02":function(t,e,a){"use strict";var r=a("154e"),i=a.n(r);i.a},"154e":function(t,e,a){},1989:function(t,e,a){},"28a5":function(t,e,a){a("214f")("split",2,function(t,e,r){"use strict";var i=a("aae3"),n=r,o=[].push,s="split",l="length",c="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[l]||2!="ab"[s](/(?:ab)*/)[l]||4!="."[s](/(.?)(.?)/)[l]||"."[s](/()()/)[l]>1||""[s](/.?/)[l]){var u=void 0===/()??/.exec("")[1];r=function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!i(t))return n.call(a,t,e);var r,s,d,p,f,h=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,g=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,m+"g");u||(r=new RegExp("^"+y.source+"$(?!\\s)",m));while(s=y.exec(a)){if(d=s.index+s[0][l],d>v&&(h.push(a.slice(v,s.index)),!u&&s[l]>1&&s[0].replace(r,function(){for(f=1;f<arguments[l]-2;f++)void 0===arguments[f]&&(s[f]=void 0)}),s[l]>1&&s.index<a[l]&&o.apply(h,s.slice(1)),p=s[0][l],v=d,h[l]>=g))break;y[c]===s.index&&y[c]++}return v===a[l]?!p&&y.test("")||h.push(""):h.push(a.slice(v)),h[l]>g?h.slice(0,g):h}}else"0"[s](void 0,0)[l]&&(r=function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)});return[function(a,i){var n=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,n,i):r.call(String(n),a,i)},r]})},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"3ebc":function(t,e,a){"use strict";a.d(e,"b",function(){return p}),a.d(e,"c",function(){return f}),a.d(e,"i",function(){return h}),a.d(e,"l",function(){return m}),a.d(e,"a",function(){return k}),a.d(e,"f",function(){return s}),a.d(e,"g",function(){return l}),a.d(e,"d",function(){return c}),a.d(e,"e",function(){return u}),a.d(e,"n",function(){return v}),a.d(e,"o",function(){return x}),a.d(e,"p",function(){return g}),a.d(e,"q",function(){return y}),a.d(e,"j",function(){return D}),a.d(e,"h",function(){return F}),a.d(e,"m",function(){return C}),a.d(e,"k",function(){return b});var r=a("2ef0"),i=a.n(r),n=a("7c15");function o(t){return i.a.sortBy(t,function(t){return t.sortId})}function s(t){return n["a"].get("/role").then(function(e){return t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function l(t){return n["a"].get("/user").then(function(e){var a={id:"",name:"全部",roleId:""};return e.data.unshift(a),t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function c(t){return n["a"].get("/company?page=0&size=1000").then(function(e){var a={id:"",name:"全部"};return e.data.list.unshift(a),t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function u(t,e){if(t)return n["a"].get("/goods?companyId=".concat(t,"&page=0&size=1000")).then(function(t){return e&&e(t.data),t.data}).catch(function(t){console.log(t)}),[]}function d(t){var e={dKey:"",id:"",dValue:"全部"};return t.unshift(e),t}var p=o(JSON.parse(sessionStorage.departmentList)),f=o(JSON.parse(sessionStorage.doctorTitleList)),h=o(JSON.parse(sessionStorage.hosLevelList)),m=o(JSON.parse(sessionStorage.propertyList)),v=o(JSON.parse(sessionStorage.skillTagList)),g=o(JSON.parse(sessionStorage.subDepartmentList)),y=o(JSON.parse(sessionStorage.typeList)),b=o(JSON.parse(sessionStorage.paperTypeList)),F=o(JSON.parse(sessionStorage.hopType)),k=JSON.parse(sessionStorage.addressProvince);y=d(y),f=d(f),h=d(h),m=d(m),v=d(v),b=d(b),F=d(F);var C=[{id:1,dKey:1,dValue:"男"},{id:0,dKey:0,dValue:"女"}],x=[{id:0,dKey:0,dValue:"启用"},{id:-1,dKey:-1,dValue:"停用"}],D=[{id:"1234560",dKey:!0,dValue:"是"},{id:"1234567",dKey:!1,dValue:"否"}]},5414:function(t,e,a){},"65b8":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"address-group"},[a("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}},t._l(t.provinceList,function(t){return a("el-option",{key:t.id?t.id:1e3*Math.random(),attrs:{label:t.areaName,value:t.id}})})),a("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cityList,function(t){return a("el-option",{key:t.id?t.id:1e3*Math.random(),attrs:{label:t.areaName,value:t.id}})})),a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.isDistrict,expression:"isDistrict"}],staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}},t._l(t.countryList,function(t){return a("el-option",{key:t.id?t.id:1e3*Math.random(),attrs:{label:t.areaName,value:t.id}})}))],1)},i=[],n=a("3ebc"),o=a("dd36"),s=!0,l={name:"userAddress",props:{seletStyle:{default:function(){return{}}},defaultValue:{default:function(){return{}},type:Object},isDistrict:{default:!0,type:Boolean}},data:function(){return{provinceList:[],cityList:[],countryList:[],province:"",city:"",country:""}},mounted:function(){this.handleProvince()},methods:{addressAddAll:function(t){var e={areaCode:"",id:"",parentId:"",areaName:"全部"};return t.unshift(e),t},handleProvince:function(){var t=JSON.parse(JSON.stringify(n["a"]));this.provinceList=this.addressAddAll(t)},handleData:function(t,e,a){var r=this;t&&Object(o["a"])("area",{parentId:t}).then(function(t){if(t.data.code=r.ok){var i=t.data.data;return i=r.addressAddAll(i),a&&a(i),"province"===e?r.cityList=i:r.countryList=i}r.$message("系统繁忙，请稍后再试")}).catch(function(t){console.log(t),r.$message("系统繁忙，请稍后再试!")})},getData:function(){var t=this,e=this.provinceList.filter(function(e){return t.province===e.id}),a=this.cityList.filter(function(e){return t.city===e.id}),r=this.countryList.filter(function(e){return t.country===e.id}),i=e.length>0?e[0].areaCode:"",n=a.length>0?a[0].areaCode:"",o=r.length>0?r[0].areaCode:"",s={province:i,city:n,country:o,checkProvince:e,checkCity:a,checkCountry:r};return s}},watch:{defaultValue:function(){var t=this;if(this.defaultValue){var e=this.defaultValue,a=e.province,r=e.city,i=e.country;if(s=!1,!a)return s=!0;var n=this.lodash.filter(this.provinceList,function(t){return t.areaCode==a});this.province=n[0].id,Object(o["a"])("area",{parentId:this.province}).then(function(e){if(e.data.code=t.ok){if(t.cityList=e.data.data,!r)return s=!0;var a=t.lodash.filter(t.cityList,function(t){return t.areaCode==r});t.city=a[0].id,Object(o["a"])("area",{parentId:t.city}).then(function(e){if(e.data.code=t.ok){if(t.countryList=e.data.data,!i)return s=!0;var a=t.lodash.filter(t.countryList,function(t){return t.areaCode==i});t.country=a[0].id,s=!0}})}})}},province:function(t,e){s&&(this.cityList=[],this.countryList=[],this.city="",this.country="",this.handleData(t,"province"),this.$emit("countryChange",this.getData()))},city:function(t,e){s&&(this.countryList=[],this.country="",this.handleData(t,"city"),this.$emit("countryChange",this.getData()))},country:function(t,e){this.$emit("countryChange",this.getData())}}},c=l,u=(a("0e02"),a("2877")),d=Object(u["a"])(c,r,i,!1,null,"498b59aa",null);d.options.__file="address.vue";e["a"]=d.exports},"6b54":function(t,e,a){"use strict";a("3846");var r=a("cb7c"),i=a("0bfb"),n=a("9e1e"),o="toString",s=/./[o],l=function(t){a("2aba")(RegExp.prototype,o,t,!0)};a("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!n&&t instanceof RegExp?i.call(t):void 0)}):s.name!=o&&l(function(){return s.call(this)})},aae3:function(t,e,a){var r=a("d3f4"),i=a("2d95"),n=a("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[n])?!!e:"RegExp"==i(t))}},ca67:function(t,e,a){"use strict";var r=a("1989"),i=a.n(r);i.a},d48e:function(t,e,a){"use strict";e["a"]={methods:{check:function(t,e){var a=this;return new Promise(function(r,i){a.lodash.some(e,function(e){t[e]||a.lodash.isBoolean(t[e])||0==t[e]||i()}),r()})}},tips:{checkTip:"请补全信息后提交"}}},de99:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hos-offices"},[a("el-select",{staticClass:"offices-input",style:t.seletStyle,attrs:{placeholder:"选择一级科室"},model:{value:t.dept1,callback:function(e){t.dept1=e},expression:"dept1"}},t._l(t.departmentList,function(t){return a("el-option",{key:t.id?t.id:1e3*Math.random(),attrs:{label:t.dValue,value:t.dKey}})})),a("el-select",{staticClass:"offices-input",style:t.seletStyle,attrs:{placeholder:"选择二级科室"},model:{value:t.dept2,callback:function(e){t.dept2=e},expression:"dept2"}},t._l(t.subDepart,function(t){return a("el-option",{key:t.id?t.id:1e3*Math.random(),attrs:{label:t.dValue,value:t.dKey}})}))],1)},i=[],n=a("3ebc"),o=(a("dd36"),!0),s={name:"hosOffices",props:["seletStyle","defaultValue"],data:function(){return{departmentList:n["b"],subDepart:[],dept1:"",dept2:""}},mounted:function(){this.dataInit()},methods:{dataInit:function(){var t=JSON.parse(JSON.stringify(n["b"]));this.departmentList=this.addAll(t)},addAll:function(t){var e={id:"",dKey:"",dValue:"全部"};t.filter(function(t){return"全部"!==t.dValue});return t.unshift(e),t},handleData:function(t){if(t){var e=this.lodash.filter(n["p"],function(e){return e.parentKey===t});this.subDepart=this.addAll(e)}},getData:function(){var t={dept1:this.dept1,dept2:this.dept2};return t}},watch:{defaultValue:function(){var t=this;if(this.defaultValue){var e=this.defaultValue,a=e.dept1,r=e.dept2;if(o=!1,!a)return o=!0;this.handleData(a),this.dept1=a,setTimeout(function(){if(!r)return o=!0;t.dept2=r,o=!0},500)}},dept1:function(t,e){t&&o&&(this.subDepart=[],this.dept2="",this.handleData(t),this.$emit("deptChange",this.getData()))}}},l=s,c=(a("0ccb"),a("2877")),u=Object(c["a"])(l,r,i,!1,null,"e44d96aa",null);u.options.__file="hosOffices.vue";e["a"]=u.exports},fc37:function(t,e,a){"use strict";a.d(e,"f",function(){return s}),a.d(e,"a",function(){return l}),a.d(e,"b",function(){return c}),a.d(e,"d",function(){return u}),a.d(e,"e",function(){return d}),a.d(e,"c",function(){return p});a("7f7f"),a("6b54"),a("28a5");var r=a("2ef0"),i=a.n(r),n=a("bc3a"),o=a.n(n);function s(t){if(!t)return"";var e=new Date(t).getFullYear(),a=new Date(t).getMonth()+1,r=new Date(t).getDate();return a<10&&(a="0"+parseInt(a)),r<10&&(r="0"+parseInt(r)),"".concat(e,"-").concat(a,"-").concat(r)}function l(t){if(!t)return"";var e=t.getFullYear(),a=t.getMonth(),r=t.getDate();return a<10&&(a="0"+parseInt(a)),r<10&&(r="0"+parseInt(r)),"".concat(e,"-").concat(a,"-").concat(r)}function c(t){if(!t)return"";var e=t.getHours(),a=t.getMinutes();return e<10&&(e="0"+parseInt(e)),a<10&&(a="0"+parseInt(a)),"".concat(e,"：").concat(a)}function u(t){return t?i.a.map(t.split("-"),function(t){var e=t.split("：")[0],a=t.split("：")[1],r=(new Date).getFullYear(),i=(new Date).getMonth(),n=(new Date).getDay();return e=e.trim(),a=a.trim(),new Date(r,i,n,e,a)}):""}function d(t,e){t=t||"0",e=e||"code",t=t.toString();var a=[{code:"0",name:"启用"},{code:"-1",name:"停用"}],r=i.a.filter(a,function(a){return a[e]===t})||a;return r}function p(t,e){if(t){var a=t.target.files[0];if(a){var r=new FormData;r.append("chunk","0"),r.append("chunks","1"),r.append("file",a,a.name);var i={headers:{"Content-Type":"multipart/form-data"}};o.a.get("/weChat/qiniu/token").then(function(t){var a=t.data.data;r.append("token",a),f(r,i,e)})}}}function f(t,e,a){o.a.post("http://upload-z1.qiniup.com/",t,e).then(function(t){var e={message:"ok",url:"http://qiniu1.tianyalei.com/".concat(t.data.key)};a&&a(e)}).catch(function(t){console.log(t,"pppp")})}}}]);
//# sourceMappingURL=chunk-adc6f0d0.6d4b59fe.js.map