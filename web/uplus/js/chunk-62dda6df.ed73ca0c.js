(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62dda6df"],{"331c":function(t,e,n){},"386d":function(t,e,n){n("214f")("search",1,function(t,e,n){return[function(n){"use strict";var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a):new RegExp(n)[e](String(a))},n]})},"3ebc":function(t,e,n){"use strict";n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"i",function(){return p}),n.d(e,"l",function(){return g}),n.d(e,"a",function(){return L}),n.d(e,"f",function(){return s}),n.d(e,"g",function(){return c}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return u}),n.d(e,"n",function(){return y}),n.d(e,"o",function(){return _}),n.d(e,"p",function(){return v}),n.d(e,"q",function(){return b}),n.d(e,"j",function(){return S}),n.d(e,"h",function(){return C}),n.d(e,"m",function(){return k}),n.d(e,"k",function(){return m});var a=n("2ef0"),i=n.n(a),r=n("7c15");function o(t){return i.a.sortBy(t,function(t){return t.sortId})}function s(t){return r["a"].get("/role").then(function(e){return t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function c(t){return r["a"].get("/user").then(function(e){var n={id:"",name:"全部",roleId:""};return e.data.unshift(n),t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function d(t){return r["a"].get("/company?page=0&size=1000").then(function(e){var n={id:"",name:"全部"};return e.data.list.unshift(n),t&&t(e.data),e.data}).catch(function(t){console.log(t)}),[]}function u(t,e){if(t)return r["a"].get("/goods?companyId=".concat(t,"&page=0&size=1000")).then(function(t){return e&&e(t.data),t.data}).catch(function(t){console.log(t)}),[]}function l(t){var e={dKey:"",id:"",dValue:"全部"};return t.unshift(e),t}var h=o(JSON.parse(sessionStorage.departmentList)),f=o(JSON.parse(sessionStorage.doctorTitleList)),p=o(JSON.parse(sessionStorage.hosLevelList)),g=o(JSON.parse(sessionStorage.propertyList)),y=o(JSON.parse(sessionStorage.skillTagList)),v=o(JSON.parse(sessionStorage.subDepartmentList)),b=o(JSON.parse(sessionStorage.typeList)),m=o(JSON.parse(sessionStorage.paperTypeList)),C=o(JSON.parse(sessionStorage.hopType)),L=JSON.parse(sessionStorage.addressProvince);b=l(b),f=l(f),p=l(p),g=l(g),y=l(y),m=l(m),C=l(C);var k=[{id:1,dKey:1,dValue:"男"},{id:0,dKey:0,dValue:"女"}],_=[{id:0,dKey:0,dValue:"启用"},{id:-1,dKey:-1,dValue:"停用"}],S=[{id:"1234560",dKey:!0,dValue:"是"},{id:"1234567",dKey:!1,dValue:"否"}]},"65b8":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"address-group"},[n("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}},t._l(t.provinceList,function(t){return n("el-option",{key:t.id?t.id:1e3*Math.random(),attrs:{label:t.areaName,value:t.id}})})),n("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cityList,function(t){return n("el-option",{key:t.id?t.id:1e3*Math.random(),attrs:{label:t.areaName,value:t.id}})})),n("el-select",{directives:[{name:"show",rawName:"v-show",value:t.isDistrict,expression:"isDistrict"}],staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}},t._l(t.countryList,function(t){return n("el-option",{key:t.id?t.id:1e3*Math.random(),attrs:{label:t.areaName,value:t.id}})}))],1)},i=[],r=n("3ebc"),o=n("dd36"),s=!0,c={name:"userAddress",props:{seletStyle:{default:function(){return{}}},defaultValue:{default:function(){return{}},type:Object},isDistrict:{default:!0,type:Boolean}},data:function(){return{provinceList:[],cityList:[],countryList:[],province:"",city:"",country:""}},mounted:function(){this.handleProvince()},methods:{addressAddAll:function(t){var e={areaCode:"",id:"",parentId:"",areaName:"全部"};return t.unshift(e),t},handleProvince:function(){var t=JSON.parse(JSON.stringify(r["a"]));this.provinceList=this.addressAddAll(t)},handleData:function(t,e,n){var a=this;t&&Object(o["a"])("area",{parentId:t}).then(function(t){if(t.data.code=a.ok){var i=t.data.data;return i=a.addressAddAll(i),n&&n(i),"province"===e?a.cityList=i:a.countryList=i}a.$message("系统繁忙，请稍后再试")}).catch(function(t){console.log(t),a.$message("系统繁忙，请稍后再试!")})},getData:function(){var t=this,e=this.provinceList.filter(function(e){return t.province===e.id}),n=this.cityList.filter(function(e){return t.city===e.id}),a=this.countryList.filter(function(e){return t.country===e.id}),i=e.length>0?e[0].areaCode:"",r=n.length>0?n[0].areaCode:"",o=a.length>0?a[0].areaCode:"",s={province:i,city:r,country:o,checkProvince:e,checkCity:n,checkCountry:a};return s}},watch:{defaultValue:function(){var t=this;if(this.defaultValue){var e=this.defaultValue,n=e.province,a=e.city,i=e.country;if(s=!1,!n)return s=!0;var r=this.lodash.filter(this.provinceList,function(t){return t.areaCode==n});this.province=r[0].id,Object(o["a"])("area",{parentId:this.province}).then(function(e){if(e.data.code=t.ok){if(t.cityList=e.data.data,!a)return s=!0;var n=t.lodash.filter(t.cityList,function(t){return t.areaCode==a});t.city=n[0].id,Object(o["a"])("area",{parentId:t.city}).then(function(e){if(e.data.code=t.ok){if(t.countryList=e.data.data,!i)return s=!0;var n=t.lodash.filter(t.countryList,function(t){return t.areaCode==i});t.country=n[0].id,s=!0}})}})}},province:function(t,e){s&&(this.cityList=[],this.countryList=[],this.city="",this.country="",this.handleData(t,"province"))},city:function(t,e){s&&(this.countryList=[],this.country="",this.handleData(t,"city"))},country:function(t,e){this.$emit("countryChange",this.getData())}}},d=c,u=(n("a092"),n("2877")),l=Object(u["a"])(d,a,i,!1,null,"3db8313c",null);l.options.__file="address.vue";e["a"]=l.exports},"65ea":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"branch"},[n("branch-options",{ref:"branchOptions",on:{search:t.search}}),n("branch-table",{attrs:{loading:t.loading,data:t.data},on:{search:t.search}}),n("div",{staticClass:"demonstration-box"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageParams.size,layout:"total, prev, pager, next",total:t.pageParams.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)},i=[],r=(n("386d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",{staticClass:"header"},[n("div",{staticClass:"left"},[n("div",{staticClass:"group"},[n("span",[t._v("分院名称：")]),n("el-input",{staticClass:"com-input",attrs:{placeholder:"请输入分院名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("div",{staticClass:"group area"},[n("span",[t._v("地区：")]),n("user-address",{ref:"branchAddress"})],1)]),n("div",{staticClass:"right"},[n("el-button",{staticClass:"btn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("查询")]),n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.addCom}},[t._v("新增分院")])],1)])],1)}),o=[],s=(n("7f7f"),n("65b8")),c={name:"branchOptions",data:function(){return{name:"",code:"0",codeId:""}},components:{UserAddress:s["a"]},mounted:function(){if(this.$route.query){var t=this.$route.query,e=t.code,n=t.id;this.code=e,this.codeId=n}},methods:{addCom:function(){this.$router.push("branchAdd?type=add&code=".concat(this.code,"&codeId=").concat(this.codeId))},search:function(){this.$emit("search")},getData:function(){var t={name:this.name},e=this.code,n=this.codeId;return"0"===e&&(t.physicalId=n),"1"===e&&(t.chinaMedId=n),"2"===e&&(t.dentistryId=n),this.lodash.assign({},t,this.$refs.branchAddress.getData())}}},d=c,u=(n("99b3"),n("2877")),l=Object(u["a"])(d,r,o,!1,null,"f095bd06",null);l.options.__file="branchOptions.vue";var h=l.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("el-table",{attrs:{data:t.branchList}},[n("el-table-column",{attrs:{prop:"id",label:"分院ID",width:"120"}}),n("el-table-column",{attrs:{prop:"name",label:"分院名称"}}),n("el-table-column",{attrs:{prop:"area",label:"地区"}}),n("el-table-column",{attrs:{prop:"address",label:"分院地址"}}),n("el-table-column",{attrs:{prop:"workTime",label:"营业时间"}}),n("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),n("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.handleClick(e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){t.stopClick(e.row)}}},[t._v(t._s(e.row.deleteFlag?"下线":"上线"))])]}}])})],1),n("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("span",[t._v(t._s(t.dialogContent))]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.sure}},[t._v("确 定")])],1)])],1)],1)},p=[],g=["确认上线该分院信息?","确认下线该分院信息?","确认删除该分院信息?"],y=["/physicalChild","/chinaMedChild","/dentistryChild"],v={name:"branchTable",props:["data","loading"],data:function(){return{branchList:[],dialogContent:"",dialogVisible:!1,id:"",code:"",codeId:""}},mounted:function(){this.$route.query&&(this.code=this.$route.query.code,this.codeId=this.$route.query.id)},methods:{handleClick:function(t){this.id=t.id,this.$router.push("branchAdd?type=edit&code=".concat(this.code,"&codeId=").concat(this.codeId,"&id=").concat(this.id))},stopClick:function(t){if(this.id=t.id,this.dialogVisible=!0,t.deleteFlag)return this.dialogContent=g[1];this.dialogContent=g[0]},sure:function(){var t=this,e=y[this.code],n=this.lodash.filter(this.branchList,function(e){return e.id===t.id}),a=n[0],i=a.name,r=a.contactPerson,o=a.address,s=a.workTime,c=a.phone,d=a.deleteFlag,u=a.id,l=a.province,h=a.city,f=a.country,p=this.codeId,g=this.code;d=!d;var v={deleteFlag:d,id:u,name:i,contactPerson:r,address:o,workTime:s,phone:c,province:l,city:h,country:f};"0"===g&&(v.physicalId=p),"1"===g&&(v.chinaMedId=p),"2"===g&&(v.dentistryId=p),this.api.put("".concat(e),v,"form").then(function(){t.$emit("search")}).catch(function(e){console.log(e),t.$message(e.data.message)}),this.dialogVisible=!1}},watch:{data:function(t){this.branchList=t}}},b=v,m=(n("bc66"),Object(u["a"])(b,f,p,!1,null,"473ff88c",null));m.options.__file="branchTable.vue";var C=m.exports,L=n("b383"),k=n.n(L),_=n("9cf8"),S=["/physicalChild","/chinaMedChild","/dentistryChild"],I={name:"branch",mixins:[_["a"]],data:function(){return{data:[],currentPage:1,loading:!1}},components:{BranchOptions:h,BranchTable:C},mounted:function(){this.search()},methods:{search:function(){var t=this;if(this.$route.query){this.loading=!0;var e=this.$route.query.code,n=this.$refs.branchOptions.getData(),a={size:20,page:this.currentPage-1},i=this.lodash.assign({},n,a),r=k.a.stringify(i||{}),o=S[e];this.api.get("".concat(o,"?").concat(r)).then(function(e){t.loading=!1,e.data&&(t.data=e.data.list,t.setPage(e.data),t.dataInit())}).catch(function(e){console.log(e),t.$message(e.message)})}},dataInit:function(){this.data.map(function(t){t.area=t.area||t.provinceValue+t.cityValue+t.countryValue})}},watch:{currentPage:function(){this.search()}}},O=I,P=(n("efa6"),Object(u["a"])(O,a,i,!1,null,"ffafbea2",null));P.options.__file="branch.vue";e["default"]=P.exports},7121:function(t,e,n){},"99b3":function(t,e,n){"use strict";var a=n("7121"),i=n.n(a);i.a},"9cf8":function(t,e,n){"use strict";n("386d"),n("cadf"),n("551c"),n("097d");var a={size:20,totalCount:100,totalPage:1},i={data:function(){return{pageParams:a,currentPage:1}},methods:{setPage:function(t){this.pageParams.totalCount=t.totalCount,this.pageParams.totalPage=t.totalPage},handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.currentPage=t}},watch:{currentPage:function(){this.search()}}};e["a"]=i},a092:function(t,e,n){"use strict";var a=n("331c"),i=n.n(a);i.a},a519:function(t,e,n){},b800:function(t,e,n){},bc66:function(t,e,n){"use strict";var a=n("b800"),i=n.n(a);i.a},efa6:function(t,e,n){"use strict";var a=n("a519"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-62dda6df.ed73ca0c.js.map