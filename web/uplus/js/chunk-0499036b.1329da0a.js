(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0499036b"],{"11e9":function(e,t,r){var o=r("52a7"),s=r("4630"),n=r("6821"),a=r("6a99"),i=r("69a8"),l=r("c69a"),c=Object.getOwnPropertyDescriptor;t.f=r("9e1e")?c:function(e,t){if(e=n(e),t=a(t,!0),l)try{return c(e,t)}catch(r){}if(i(e,t))return s(!o.f.call(e,t),e[t])}},1902:function(e,t,r){},"3ebc":function(e,t,r){"use strict";r.d(t,"b",function(){return p}),r.d(t,"c",function(){return f}),r.d(t,"i",function(){return m}),r.d(t,"l",function(){return v}),r.d(t,"a",function(){return N}),r.d(t,"f",function(){return i}),r.d(t,"g",function(){return l}),r.d(t,"d",function(){return c}),r.d(t,"e",function(){return u}),r.d(t,"n",function(){return b}),r.d(t,"o",function(){return k}),r.d(t,"p",function(){return g}),r.d(t,"q",function(){return h}),r.d(t,"j",function(){return T}),r.d(t,"h",function(){return I}),r.d(t,"m",function(){return x}),r.d(t,"k",function(){return y});var o=r("2ef0"),s=r.n(o),n=r("7c15");function a(e){return s.a.sortBy(e,function(e){return e.sortId})}function i(e){return n["a"].get("/role").then(function(t){return e&&e(t.data),t.data}).catch(function(e){console.log(e)}),[]}function l(e){return n["a"].get("/user").then(function(t){var r={id:"",name:"全部",roleId:""};return t.data.unshift(r),e&&e(t.data),t.data}).catch(function(e){console.log(e)}),[]}function c(e){return n["a"].get("/company?page=0&size=1000").then(function(t){var r={id:"",name:"全部"};return t.data.list.unshift(r),e&&e(t.data),t.data}).catch(function(e){console.log(e)}),[]}function u(e,t){if(e)return n["a"].get("/goods?companyId=".concat(e,"&page=0&size=1000")).then(function(e){return t&&t(e.data),e.data}).catch(function(e){console.log(e)}),[]}function d(e){var t={dKey:"",id:"",dValue:"全部"};return e.unshift(t),e}var p=a(JSON.parse(sessionStorage.departmentList)),f=a(JSON.parse(sessionStorage.doctorTitleList)),m=a(JSON.parse(sessionStorage.hosLevelList)),v=a(JSON.parse(sessionStorage.propertyList)),b=a(JSON.parse(sessionStorage.skillTagList)),g=a(JSON.parse(sessionStorage.subDepartmentList)),h=a(JSON.parse(sessionStorage.typeList)),y=a(JSON.parse(sessionStorage.paperTypeList)),I=a(JSON.parse(sessionStorage.hopType)),N=JSON.parse(sessionStorage.addressProvince);h=d(h),f=d(f),m=d(m),v=d(v),b=d(b),y=d(y),I=d(I);var x=[{id:1,dKey:1,dValue:"男"},{id:0,dKey:0,dValue:"女"}],k=[{id:0,dKey:0,dValue:"启用"},{id:-1,dKey:-1,dValue:"停用"}],T=[{id:"1234560",dKey:!0,dValue:"是"},{id:"1234567",dKey:!1,dValue:"否"}]},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"5dbc":function(e,t,r){var o=r("d3f4"),s=r("8b97").set;e.exports=function(e,t,r){var n,a=t.constructor;return a!==r&&"function"==typeof a&&(n=a.prototype)!==r.prototype&&o(n)&&s&&s(e,n),e}},"8b97":function(e,t,r){var o=r("d3f4"),s=r("cb7c"),n=function(e,t){if(s(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{o=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),o(e,[]),t=!(e instanceof Array)}catch(s){t=!0}return function(e,r){return n(e,r),t?e.__proto__=r:o(e,r),e}}({},!1):void 0),check:n}},9093:function(e,t,r){var o=r("ce10"),s=r("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,s)}},"91dd":function(e,t,r){"use strict";function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,n){t=t||"&",r=r||"=";var a={};if("string"!==typeof e||0===e.length)return a;var i=/\+/g;e=e.split(t);var l=1e3;n&&"number"===typeof n.maxKeys&&(l=n.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var d,p,f,m,v=e[u].replace(i,"%20"),b=v.indexOf(r);b>=0?(d=v.substr(0,b),p=v.substr(b+1)):(d=v,p=""),f=decodeURIComponent(d),m=decodeURIComponent(p),o(a,f)?s(a[f])?a[f].push(m):a[f]=[a[f],m]:a[f]=m}return a};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},a9a3:function(e,t,r){"use strict";var o=r("1902"),s=r.n(o);s.a},aa77:function(e,t,r){var o=r("5ca1"),s=r("be13"),n=r("79e5"),a=r("fdef"),i="["+a+"]",l="​",c=RegExp("^"+i+i+"*"),u=RegExp(i+i+"*$"),d=function(e,t,r){var s={},i=n(function(){return!!a[e]()||l[e]()!=l}),c=s[e]=i?t(p):a[e];r&&(s[r]=c),o(o.P+o.F*i,"String",s)},p=d.trim=function(e,t){return e=String(s(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},b383:function(e,t,r){"use strict";t.decode=t.parse=r("91dd"),t.encode=t.stringify=r("e099")},c5f6:function(e,t,r){"use strict";var o=r("7726"),s=r("69a8"),n=r("2d95"),a=r("5dbc"),i=r("6a99"),l=r("79e5"),c=r("9093").f,u=r("11e9").f,d=r("86cc").f,p=r("aa77").trim,f="Number",m=o[f],v=m,b=m.prototype,g=n(r("2aeb")(b))==f,h="trim"in String.prototype,y=function(e){var t=i(e,!1);if("string"==typeof t&&t.length>2){t=h?t.trim():p(t,3);var r,o,s,n=t.charCodeAt(0);if(43===n||45===n){if(r=t.charCodeAt(2),88===r||120===r)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:o=2,s=49;break;case 79:case 111:o=8,s=55;break;default:return+t}for(var a,l=t.slice(2),c=0,u=l.length;c<u;c++)if(a=l.charCodeAt(c),a<48||a>s)return NaN;return parseInt(l,o)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof m&&(g?l(function(){b.valueOf.call(r)}):n(r)!=f)?a(new v(y(t)),r,m):y(t)};for(var I,N=r("9e1e")?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;N.length>x;x++)s(v,I=N[x])&&!s(m,I)&&d(m,I,u(v,I));m.prototype=b,b.constructor=m,r("2aba")(o,f,m)}},e099:function(e,t,r){"use strict";var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?n(a(e),function(a){var i=encodeURIComponent(o(a))+r;return s(e[a])?n(e[a],function(e){return i+encodeURIComponent(o(e))}).join(t):i+encodeURIComponent(o(e[a]))}).join(t):i?encodeURIComponent(o(i))+r+encodeURIComponent(o(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(e,t){if(e.map)return e.map(t);for(var r=[],o=0;o<e.length;o++)r.push(t(e[o],o));return r}var a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},e826:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-main",[r("h3",{staticStyle:{"padding-bottom":"10px","border-bottom":"1px solid #eee"}},[e._v("企业名称："+e._s(e.companyName))]),r("el-form",{ref:"servesInfo",staticClass:"demo-ruleForm",attrs:{model:e.servesInfo,rules:e.rules,"label-width":"170px"}},[r("el-form-item",{attrs:{label:"被服务人姓名：",prop:"userName"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入内容"},model:{value:e.servesInfo.userName,callback:function(t){e.$set(e.servesInfo,"userName",t)},expression:"servesInfo.userName"}})],1),r("el-form-item",{attrs:{label:"被服务人性别：",prop:"sex"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.servesInfo.sex,callback:function(t){e.$set(e.servesInfo,"sex",t)},expression:"servesInfo.sex"}},e._l(e.sexList,function(e){return r("el-option",{key:e.dValue,attrs:{label:e.dValue,value:e.dKey}})}))],1),r("el-form-item",{attrs:{label:"被服务人证件类型：",prop:"paperType"}},[r("el-select",{attrs:{placeholder:"全部"},model:{value:e.servesInfo.paperType,callback:function(t){e.$set(e.servesInfo,"paperType",t)},expression:"servesInfo.paperType"}},e._l(e.paperTypeList,function(e){return r("el-option",{key:e.dKey,attrs:{label:e.dValue,value:e.dKey}})}))],1),r("el-form-item",{attrs:{label:"被服务人证件号码：",prop:"paper"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入内容"},model:{value:e.servesInfo.paper,callback:function(t){e.$set(e.servesInfo,"paper",t)},expression:"servesInfo.paper"}})],1),r("el-form-item",{attrs:{label:"被服务人电话号码：",prop:"mobile"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入内容"},model:{value:e.servesInfo.mobile,callback:function(t){e.$set(e.servesInfo,"mobile",t)},expression:"servesInfo.mobile"}})],1),r("el-form-item",{attrs:{label:"被服务人电子邮件：",prop:"mobile"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入内容"},model:{value:e.servesInfo.email,callback:function(t){e.$set(e.servesInfo,"email",t)},expression:"servesInfo.email"}})],1),r("el-form-item",{attrs:{label:"所属商品：",prop:"ptGoodsId"}},[r("el-select",{attrs:{placeholder:"全部"},model:{value:e.servesInfo.ptGoodsId,callback:function(t){e.$set(e.servesInfo,"ptGoodsId",t)},expression:"servesInfo.ptGoodsId"}},e._l(e.goodsInfoList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),r("el-form-item",{attrs:{label:"保单号/服务单号：",prop:"cardNum"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入内容"},model:{value:e.servesInfo.cardNum,callback:function(t){e.$set(e.servesInfo,"cardNum",t)},expression:"servesInfo.cardNum"}})],1),r("el-form-item",{attrs:{label:"商品生效日期：",prop:"beginTime"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.servesInfo.beginTime,callback:function(t){e.$set(e.servesInfo,"beginTime",t)},expression:"servesInfo.beginTime"}})],1),r("el-form-item",{attrs:{label:"商品失效日期：",prop:"endTime"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.servesInfo.endTime,callback:function(t){e.$set(e.servesInfo,"endTime",t)},expression:"servesInfo.endTime"}})],1),r("el-form-item",{attrs:{label:"特别约定：",prop:"remark"}},[r("el-input",{staticClass:"input-width",attrs:{type:"textarea",rows:3,size:"medium",placeholder:"请输入内容"},model:{value:e.servesInfo.remark,callback:function(t){e.$set(e.servesInfo,"remark",t)},expression:"servesInfo.remark"}})],1),r("el-form-item",{attrs:{label:"保单状态：",prop:"state"}},[r("el-radio-group",{model:{value:e.servesInfo.state,callback:function(t){e.$set(e.servesInfo,"state",t)},expression:"servesInfo.state"}},[r("el-radio",{attrs:{label:"0"}},[e._v("正常")]),r("el-radio",{attrs:{label:"1"}},[e._v("中止")]),r("el-radio",{attrs:{label:"2"}},[e._v("终止")]),r("el-radio",{attrs:{label:"3"}},[e._v("失效")])],1)],1)],1),r("div",{staticClass:"list btn-center"},[r("el-button",{attrs:{type:"primary"},on:{click:e.addOrderRelation}},[e._v("增加关联权益人")]),r("el-button",{on:{click:function(t){e.otherInfo=!1}}},[e._v("取消关联权益人")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.otherInfo,expression:"otherInfo"}],staticClass:"other-info"},[r("el-form",{ref:"orderRelation",staticClass:"demo-ruleForm",attrs:{model:e.orderRelation,rules:e.rules2,"label-width":"170px"}},[r("el-form-item",{attrs:{label:"关联权益人姓名：",prop:"userName"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入内容"},model:{value:e.orderRelation.userName,callback:function(t){e.$set(e.orderRelation,"userName",t)},expression:"orderRelation.userName"}})],1),r("el-form-item",{attrs:{label:"关联权益人性别：",prop:"sex"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.orderRelation.sex,callback:function(t){e.$set(e.orderRelation,"sex",t)},expression:"orderRelation.sex"}},e._l(e.sexList,function(e){return r("el-option",{key:e.dValue,attrs:{label:e.dValue,value:e.dKey}})}))],1),r("el-form-item",{attrs:{label:"关联权益人证件类型：",prop:"paperType"}},[r("el-select",{attrs:{placeholder:"全部"},model:{value:e.orderRelation.paperType,callback:function(t){e.$set(e.orderRelation,"paperType",t)},expression:"orderRelation.paperType"}},e._l(e.paperTypeList,function(e){return r("el-option",{key:e.dKey,attrs:{label:e.dValue,value:e.dKey}})}))],1),r("el-form-item",{attrs:{label:"关联权益人证件号码：",prop:"paper"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入内容"},model:{value:e.orderRelation.paper,callback:function(t){e.$set(e.orderRelation,"paper",t)},expression:"orderRelation.paper"}})],1),r("el-form-item",{attrs:{label:"关联权益人手机号码：",prop:"mobile"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入内容"},model:{value:e.orderRelation.mobile,callback:function(t){e.$set(e.orderRelation,"mobile",t)},expression:"orderRelation.mobile"}})],1),r("el-form-item",{attrs:{label:"关联权益人电子邮件：",prop:"email"}},[r("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入内容"},model:{value:e.orderRelation.email,callback:function(t){e.$set(e.orderRelation,"email",t)},expression:"orderRelation.email"}})],1),r("el-form-item",{attrs:{label:"与被服务人关系：",prop:"relationType"}},[r("el-radio-group",{model:{value:e.orderRelation.relationType,callback:function(t){e.$set(e.orderRelation,"relationType",t)},expression:"orderRelation.relationType"}},[r("el-radio",{attrs:{label:"1"}},[e._v("父母")]),r("el-radio",{attrs:{label:"2"}},[e._v("子女")]),r("el-radio",{attrs:{label:"3"}},[e._v("配偶")]),r("el-radio",{attrs:{label:"4"}},[e._v("其他")])],1)],1)],1)],1),r("div",{staticClass:"btn-center"},[r("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("提交")]),r("el-button",{attrs:{type:""},on:{click:e.cancel}},[e._v("取消")])],1)],1)},s=[],n=(r("c5f6"),{id:"",reason:"",userName:"",ptGoodsId:"",companyId:"",sex:"",paperType:"1",paper:"",mobile:"",cardNum:"",email:"",beginTime:"",endTime:"",remark:"",state:"0",orderRelation:{id:"",userName:"",sex:"",paperType:"1",paper:"",mobile:"",email:"",relationType:""}}),a=r("3ebc"),i=r("b383"),l={name:"addOrEditServe",data:function(){return{companyName:"",sexList:a["m"],paperTypeList:a["k"],goodPlanList:[],otherInfo:!1,servesInfo:JSON.parse(JSON.stringify(n)),goodsInfoList:[],orderRelation:{},rules:{ptGoodsId:[{required:!0,message:"请选择所属商品",trigger:"change"}],userName:[{required:!0,message:"请输入被服务人姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择被服务人性别",trigger:"change"}],paperType:[{required:!0,message:"请选择被服务人证件类型",trigger:"change"}],paper:[{required:!0,message:"请输入被服务人证件号码",trigger:"blur"}],mobile:[{required:!0,message:"请输入被服务人电话号码",trigger:"blur"}],beginTime:[{type:"string",required:!0,message:"请选择商品生效日期",trigger:"change"}],endTime:[{type:"string",required:!0,message:"请选择商品失效日期",trigger:"change"}]},rules2:{userName:[{required:!0,message:"请输入关联权益人姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择关联权益人性别",trigger:"change"}],paperType:[{required:!0,message:"请选择关联权益人证件类型",trigger:"change"}],paper:[{required:!0,message:"请输入关联权益人证件号码",trigger:"blur"}],mobile:[{required:!0,message:"请输入关联权益人手机号码",trigger:"blur"}]}}},created:function(){this.init()},methods:{init:function(){var e=this.$route.query;this.companyName=e.companyName,this.companyId=e.companyId,this.isEdit="edit"===e.type,this.goodsName=this.isEdit?e.goodsName:"新增商品",this.servesInfo.companyId=this.companyId,this.getGoodsList(),e.id?(this.servesInfo.id=e.id,this.orderRelation.id=e.id,this.getEditServe()):delete this.servesInfo.id},getGoodsList:function(){var e=this,t=this.companyId,r={companyId:t,page:0,size:1e3};this.axios.get("/goods?"+i.stringify(r)).then(function(t){var r=Number(t.data.code);200===r?e.goodsInfoList=t.data.data.list:e.$message(e.mes.busy)}).catch(function(t){console.log(t),e.$message(e.mes.busy)})},addOrderRelation:function(){this.otherInfo=!0},confirm:function(){var e=this;this.otherInfo?(this.servesInfo.orderRelation=this.orderRelation,this.$refs["servesInfo"].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$refs["orderRelation"].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.sendBt()})})):(delete this.servesInfo.orderRelation,this.$refs["servesInfo"].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.sendBt()}))},sendBt:function(){var e=this;this.servesInfo.state=Number(this.servesInfo.state),this.servesInfo.ptGoodsId=Number(this.servesInfo.ptGoodsId),this.servesInfo.companyId=Number(this.servesInfo.companyId),this.servesInfo.sex=Number(this.servesInfo.sex);var t=this.edit?"put":"post";this.axios[t]("/order",this.servesInfo).then(function(t){var r=Number(t.data.code);200===r?(e.$message(e.mes.success),e.$router.back()):e.$message(e.mes.busy)}).catch(function(t){console.log(t),e.$message(e.mes.busy)})},cancel:function(){this.$router.back()},getGoodsPlan:function(){var e=this,t={companyId:this.companyId};this.axios.get("/goodsPlan?"+i.stringify(t)).then(function(t){var r=Number(t.data.code);200===r?e.goodPlanList=t.data.data:e.$message(e.mes.busy)}).catch(function(t){console.log(t),e.$message(e.mes.busy)})},getEditServe:function(){var e=this;this.axios.get("/order/".concat(this.servesInfo.id)).then(function(t){var r=Number(t.data.code);if(200===r){var o=t.data.data;for(var s in n)e.servesInfo[s]=o[s];e.servesInfo.beginTime=e.timeFormater(o.beginTime).format("YYYY-MM-DD"),e.servesInfo.endTime=e.timeFormater(o.endTime).format("YYYY-MM-DD"),e.servesInfo.state=String(e.servesInfo.state),e.otherInfo=!!e.servesInfo.orderRelation,e.orderRelation=e.servesInfo.orderRelation||{}}else e.$message(e.mes.busy)}).catch(function(t){console.log(t),e.$message(e.mes.busy)})}}},c=l,u=(r("a9a3"),r("2877")),d=Object(u["a"])(c,o,s,!1,null,"4131c7b0",null);d.options.__file="addOrEditServe.vue";t["default"]=d.exports},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-0499036b.1329da0a.js.map