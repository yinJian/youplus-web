(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-379e9634"],{"11e9":function(t,e,s){var o=s("52a7"),a=s("4630"),i=s("6821"),n=s("6a99"),r=s("69a8"),c=s("c69a"),d=Object.getOwnPropertyDescriptor;e.f=s("9e1e")?d:function(t,e){if(t=i(t),e=n(e,!0),c)try{return d(t,e)}catch(s){}if(r(t,e))return a(!o.f.call(t,e),t[e])}},"15ac":function(t,e,s){},"1c95":function(t,e,s){},"38cc":function(t,e,s){"use strict";var o=s("1c95"),a=s.n(o);a.a},5065:function(t,e,s){"use strict";var o=s("b2a3"),a=s.n(o);a.a},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"545b":function(t,e,s){"use strict";var o=s("739c"),a=s.n(o);a.a},"5dbc":function(t,e,s){var o=s("d3f4"),a=s("8b97").set;t.exports=function(t,e,s){var i,n=e.constructor;return n!==s&&"function"==typeof n&&(i=n.prototype)!==s.prototype&&o(i)&&a&&a(t,i),t}},"65b8":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"address-group"},[s("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}},t._l(t.provinceList,function(t){return s("el-option",{key:t.id,attrs:{label:t.areaName,value:t.id}})})),s("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cityList,function(t){return s("el-option",{key:t.id,attrs:{label:t.areaName,value:t.id}})})),s("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}},t._l(t.countryList,function(t){return s("el-option",{key:t.id,attrs:{label:t.areaName,value:t.id}})}))],1)},a=[],i=s("7622"),n=s("dd36"),r=!0,c={name:"userAddress",props:["seletStyle","defaultValue"],data:function(){return{provinceList:[],cityList:[],countryList:[],province:"",city:"",country:""}},mounted:function(){this.handleProvince()},methods:{handleProvince:function(){this.provinceList=i["a"]},handleData:function(t,e,s){var o=this;t&&Object(n["a"])("area",{parentId:t}).then(function(t){if(t.data.code=o.ok)return s&&s(t.data.data),"province"===e?o.cityList=t.data.data:o.countryList=t.data.data;o.$message("系统繁忙，请稍后再试")}).catch(function(t){console.log(t),o.$message("系统繁忙，请稍后再试!")})},getData:function(){var t=this,e=this.provinceList.filter(function(e){return t.province===e.id}),s=this.cityList.filter(function(e){return t.city===e.id}),o=this.countryList.filter(function(e){return t.country===e.id}),a=e.length>0?e[0].areaCode:"",i=s.length>0?s[0].areaCode:"",n=o.length>0?o[0].areaCode:"",r={province:a,city:i,country:n,checkProvince:e,checkCity:s,checkCountry:o};return r}},watch:{defaultValue:function(){var t=this;if(this.defaultValue){var e=this.defaultValue,s=e.province,o=e.city,a=e.country;if(r=!1,!s)return r=!0;var i=this.lodash.filter(this.provinceList,function(t){return t.areaCode==s});this.province=i[0].id,Object(n["a"])("area",{parentId:this.province}).then(function(e){if(e.data.code=t.ok){if(t.cityList=e.data.data,!o)return r=!0;var s=t.lodash.filter(t.cityList,function(t){return t.areaCode==o});t.city=s[0].id,Object(n["a"])("area",{parentId:t.city}).then(function(e){if(e.data.code=t.ok){if(t.countryList=e.data.data,!a)return r=!0;var s=t.lodash.filter(t.countryList,function(t){return t.areaCode==a});t.country=s[0].id,r=!0}})}})}},province:function(t,e){t&&r&&(this.cityList=[],this.countryList=[],this.city="",this.country="",this.handleData(t,"province"))},city:function(t,e){t&&r&&(this.countryList=[],this.country="",this.handleData(t,"city"))},country:function(t,e){this.$emit("countryChange",this.getData())}}},d=c,l=(s("545b"),s("2877")),u=Object(l["a"])(d,o,a,!1,null,"987460c8",null);u.options.__file="address.vue";e["a"]=u.exports},"739c":function(t,e,s){},7622:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var o=JSON.parse(sessionStorage.addressProvince)},"8b97":function(t,e,s){var o=s("d3f4"),a=s("cb7c"),i=function(t,e){if(a(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=s("9b43")(Function.call,s("11e9").f(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,s){return i(t,s),e?t.__proto__=s:o(t,s),t}}({},!1):void 0),check:i}},9093:function(t,e,s){var o=s("ce10"),a=s("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,a)}},aa77:function(t,e,s){var o=s("5ca1"),a=s("be13"),i=s("79e5"),n=s("fdef"),r="["+n+"]",c="​",d=RegExp("^"+r+r+"*"),l=RegExp(r+r+"*$"),u=function(t,e,s){var a={},r=i(function(){return!!n[t]()||c[t]()!=c}),d=a[t]=r?e(f):n[t];s&&(a[s]=d),o(o.P+o.F*r,"String",a)},f=u.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(d,"")),2&e&&(t=t.replace(l,"")),t};t.exports=u},b2a3:function(t,e,s){},c5f6:function(t,e,s){"use strict";var o=s("7726"),a=s("69a8"),i=s("2d95"),n=s("5dbc"),r=s("6a99"),c=s("79e5"),d=s("9093").f,l=s("11e9").f,u=s("86cc").f,f=s("aa77").trim,h="Number",m=o[h],p=m,v=m.prototype,y=i(s("2aeb")(v))==h,g="trim"in String.prototype,I=function(t){var e=r(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():f(e,3);var s,o,a,i=e.charCodeAt(0);if(43===i||45===i){if(s=e.charCodeAt(2),88===s||120===s)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:o=2,a=49;break;case 79:case 111:o=8,a=55;break;default:return+e}for(var n,c=e.slice(2),d=0,l=c.length;d<l;d++)if(n=c.charCodeAt(d),n<48||n>a)return NaN;return parseInt(c,o)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof m&&(y?c(function(){v.valueOf.call(s)}):i(s)!=h)?n(new p(I(e)),s,m):I(e)};for(var b,P=s("9e1e")?d(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;P.length>_;_++)a(p,b=P[_])&&!a(m,b)&&u(m,b,l(p,b));m.prototype=v,v.constructor=m,s("2aba")(o,h,m)}},e544:function(t,e,s){"use strict";s.r(e);var o={};s.r(o),s.d(o,"servesList",function(){return _}),s.d(o,"servesItem",function(){return C}),s.d(o,"waitItem",function(){return k}),s.d(o,"singleDurationItem",function(){return x}),s.d(o,"selfPayItem",function(){return D}),s.d(o,"ptCashPrePay",function(){return N}),s.d(o,"ptPhoneDoctor",function(){return $}),s.d(o,"goodsInfo",function(){return O});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contianer"},[s("h3",{staticClass:"title"},[t._v("企业名称："+t._s(t.companyName)+"-"+t._s(t.goodsName))]),s("div",{staticClass:"list"},[t._m(0),s("el-select",{attrs:{placeholder:"无"},model:{value:t.goodsInfo.ptGoodsPlanId,callback:function(e){t.$set(t.goodsInfo,"ptGoodsPlanId",e)},expression:"goodsInfo.ptGoodsPlanId"}},t._l(t.goodsPlanList,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),s("div",{staticClass:"list"},[t._m(1),s("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.goodsInfo.name,callback:function(e){t.$set(t.goodsInfo,"name",e)},expression:"goodsInfo.name"}})],1),s("div",{staticClass:"list"},[t._m(2),s("el-input",{attrs:{type:"textarea",rows:2,size:"medium",placeholder:"请输入内容"},model:{value:t.goodsInfo.remark,callback:function(e){t.$set(t.goodsInfo,"remark",e)},expression:"goodsInfo.remark"}})],1),s("div",{staticClass:"list"},[s("span"),t._m(3),s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.goodsInfo.beginTime,callback:function(e){t.$set(t.goodsInfo,"beginTime",e)},expression:"goodsInfo.beginTime"}}),s("span"),t._m(4),s("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.goodsInfo.endTime,callback:function(e){t.$set(t.goodsInfo,"endTime",e)},expression:"goodsInfo.endTime"}})],1),s("div",{staticClass:"pl"},[s("p",[t._v("商品绑定优加服务：")]),s("el-checkbox-group",{on:{change:t.handleCheckedServesChange},model:{value:t.checkedServes,callback:function(e){t.checkedServes=e},expression:"checkedServes"}},t._l(t.servesList,function(e){return s("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1),t.goodsInfo.ptCashPrePay?s("div",{staticClass:"pl"},[s("p",[t._v("押金垫付设置")]),s("serve-address",{ref:"cashAddress"}),s("serve-radio",{ref:"cashServesItem",attrs:{item:t.servesItem}}),s("serve-radio",{ref:"cashWaitItem",attrs:{item:t.waitItem}}),s("div",{staticClass:"list"},[s("label",{staticClass:"list-item require"},[t._v("沟通确认提示文案:")]),s("el-input",{attrs:{type:"textarea",rows:2,size:"medium",placeholder:"请输入内容"},model:{value:t.ptCashPrePay.remark,callback:function(e){t.$set(t.ptCashPrePay,"remark",e)},expression:"ptCashPrePay.remark"}})],1)],1):t._e(),t.goodsInfo.ptPhoneDoctor?s("div",{staticClass:"pl"},[s("p",[t._v("电话医生设置")]),s("serve-address",{ref:"docAddress"}),s("serve-radio",{ref:"docServesItem",attrs:{item:t.servesItem}}),s("serve-radio",{ref:"singleDurationItem",attrs:{item:t.singleDurationItem}}),s("serve-radio",{ref:"selfPayItem",attrs:{item:t.selfPayItem}}),s("serve-radio",{ref:"docWaitItem",attrs:{item:t.waitItem}})],1):t._e(),s("div",{staticClass:"list btn-submit pl"},[s("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")]),s("el-button",{attrs:{type:"primary",plain:""},on:{click:t.back}},[t._v("返回")])],1)])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"list-item"},[s("i",[t._v("所属商品计划:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"list-item require"},[s("i",[t._v("商品名称：")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"list-item"},[s("i",[t._v("商品简介：")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"list-item require",attrs:{for:""}},[s("i",[t._v("商品生效日期：")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"list-item require",attrs:{for:""}},[s("i",[t._v("商品失效日期：")])])}],n=(s("c5f6"),s("ade3"));function r(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},o=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(t){return Object.getOwnPropertyDescriptor(s,t).enumerable}))),o.forEach(function(e){Object(n["a"])(t,e,s[e])})}return t}var c=s("65b8"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list"},[s("label",{attrs:{for:""}},[t._v(t._s(t.item.label)+"：")]),s("el-radio",{attrs:{label:"-1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.item.radioText1))]),s("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(t.item.radioText2))]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.radio,expression:"radio == 1"}]},[s("label",{staticClass:"pl",attrs:{for:""}},[t._v(t._s(t.item.timesText)+"：")]),s("el-input",{staticClass:"width",model:{value:t.times,callback:function(e){t.times=e},expression:"times"}})],1)],1)},l=[],u={name:"serveRadio",props:["item"],data:function(){return{radio:"",times:""}},methods:{getData:function(){var t=1==this.radio?this.times:this.radio;return Number(t)}}},f=u,h=(s("f33d"),s("2877")),m=Object(h["a"])(f,d,l,!1,null,"183b704e",null);m.options.__file="serveRadio.vue";var p=m.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"list"},[t._m(0),s("user-address",{ref:"address"}),s("el-button",{on:{click:t.addAddress}},[t._v("添加")]),s("el-checkbox",{staticClass:"pl",model:{value:t.allCity,callback:function(e){t.allCity=e},expression:"allCity"}},[t._v("全国")])],1),s("div",{staticClass:"list"},t._l(t.addressName,function(e,o){return s("span",{key:o,staticClass:"pl"},[t._v(t._s(e))])}))])},y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"list-item"},[s("i",[t._v("服务区域:")])])}],g={name:"serveAddress",data:function(){return{addressList:[],allCity:!1,addressName:[]}},components:{UserAddress:c["a"]},methods:{addAddress:function(t){this.allCity=!1,this.addressList=this.addressList.concat(this.$refs.address.getData().checkCity),this.addressName.push(this.$refs.address.getData().checkCity[0].areaName),console.log(this.addressList)},getData:function(){var t="";return this.addressList.reduce(function(e){t+=e.areaCode+","}),t||"-1"},allCityChange:function(){this.allCity&&(this.addressList=[])}},watch:{allCity:function(t){console.log(t),t&&(this.addressName=[],this.addressList=[])}}},I=g,b=(s("38cc"),Object(h["a"])(I,v,y,!1,null,"ec03670c",null));b.options.__file="serveAddress.vue";var P=b.exports,_=["押金垫付","电话医生","体检服务","门诊绿通","住院绿通","手术绿通","二次诊疗"],C={label:"服务次数",radioText1:"不限",radioText2:"限制",timesText:"次数"},k={label:"等待期",radioText1:"无",radioText2:"有",timesText:"天数"},x={label:"单次时长",radioText1:"不限",radioText2:"限制",timesText:"时间(分钟)"},D={label:"自费购买",radioText1:"不允许",radioText2:"允许",timesText:"单价(元)"},N={cityCodes:"",serverTimes:"",waitMonths:"",remark:"",filePaths:""},$={cityCodes:"",serverTimes:"",singleDuration:"",selfPay:"",waitMonths:""},O={id:"",reason:"",name:"",ptGoodsPlanId:"",beginTime:"",endTime:"",remark:"",companyId:"",youBodyCheck:0,youOutpatient:0,youHospital:0,youOperation:0,youSecondMed:0,ptCashPrePay:0,ptPhoneDoctor:0},T=s("b383"),L={name:"addOrEditGoods",data:function(){return r({comName:"",companyId:"",goodsName:"",isEdit:"",goodsId:"",goodsPlanList:[],checkedServes:[]},o)},components:{UserAddress:c["a"],serveRadio:p,serveAddress:P},created:function(){this.init(),this.getGoodsPlan(),this.isEdit&&this.getGoodsInfo()},methods:{init:function(){var t=this.$route.query;this.companyName=t.companyName,this.companyId=t.companyId,this.goodsId=t.goodsId,this.isEdit="edit"===t.type,this.goodsName=this.isEdit?t.goodsName:"新增商品",this.goodsInfo.companyId=this.companyId,t.goodsId?this.goodsInfo.id=t.goodsId:delete this.goodsInfo.id},getGoodsInfo:function(){var t=this;this.axios.get("/goods/".concat(this.goodsId,"/detail")).then(function(e){var s=Number(e.data.code);200===s&&(t.goodsInfo=e.data.data.modified,console.log(t.goodsInfo),t.goodsInfo.beginTime=t.timeFormater(t.goodsInfo.beginTime).format("YYYY-MM-DD"),t.goodsInfo.endTime=t.timeFormater(t.goodsInfo.endTime).format("YYYY-MM-DD"),t.goodsInfo.youCashPrePayId&&t.setPtCashPrePay(t.goodsInfo.youCashPrePayId),t.goodsInfo.youPhoneDoctorId&&t.setPtPhoneDoctor(t.goodsInfo.youPhoneDoctorId))}).catch(function(t){console.log(t)})},setPtCashPrePay:function(t){this.axios.get("/goods/cashPrePay/".concat(t)).then(function(t){var e=Number(t.data.code);200===e&&console.log(t.data.data)}).catch(function(t){console.log(t)})},setPtPhoneDoctor:function(){this.axios.get("/goods/phoneDoctor/".concat(id)).then(function(t){var e=Number(t.data.code);200===e&&console.log(t.data.data)}).catch(function(t){console.log(t)})},getGoodsPlan:function(){var t=this,e={companyId:this.companyId};this.axios.get("/goodsPlan?"+T.stringify(e)).then(function(e){var s=Number(e.data.code);200===s?t.goodsPlanList=e.data.data:t.$message(t.mes.busy)}).catch(function(e){console.log(e),t.$message(t.mes.busy)})},handleCheckedServesChange:function(t){console.log(t)},getPtCashPrePay:function(){this.ptCashPrePay.cityCodes=this.$refs.cashAddress.getData(),this.ptCashPrePay.serverTimes=this.$refs.cashServesItem.getData(),this.ptCashPrePay.waitMonths=this.$refs.cashWaitItem.getData()},getPtPhoneDoctor:function(){this.ptPhoneDoctor.cityCodes=this.$refs.docAddress.getData(),this.ptPhoneDoctor.serverTimes=this.$refs.docServesItem.getData(),this.ptPhoneDoctor.singleDuration=this.$refs.singleDurationItem.getData(),this.ptPhoneDoctor.selfPay=1===this.$refs.selfPayItem.getData(),this.ptPhoneDoctor.waitMonths=this.$refs.docWaitItem.getData()},getParams:function(){this.goodsInfo.ptCashPrePay?(this.getPtCashPrePay(),this.goodsInfo.ptCashPrePay=this.ptCashPrePay):delete this.goodsInfo.ptCashPrePay,this.goodsInfo.ptPhoneDoctor?(this.getPtPhoneDoctor(),this.goodsInfo.ptPhoneDoctor=this.ptPhoneDoctor):delete this.goodsInfo.ptPhoneDoctor,console.log(this.goodsInfo)},update:function(){var t=this;this.axios.patch("/goods",this.goodsInfo).then(function(e){var s=Number(e.data.code);200===s?(t.$message(t.mes.success),t.$router.push("goodsList")):t.$message(t.mes.busy)}).catch(function(e){console.log(e),t.$message(t.mes.busy)})},add:function(){var t=this;this.getParams(),delete this.goodsInfo.reason,delete this.goodsInfo.ptGoodsPlanId,this.axios.post("/goods",this.goodsInfo).then(function(e){var s=Number(e.data.code);200===s?(t.$message(t.mes.success),t.$router.push("goodsList")):t.$message(t.mes.busy)}).catch(function(e){console.log(e),t.$message(t.mes.busy)})},submit:function(){this.getParams(),this.isEdit?this.update():this.add()},back:function(){this.$router.back()}},watch:{checkedServes:function(t,e){this.goodsInfo.youBodyCheck=t.indexOf("体检服务")>-1?1:0,this.goodsInfo.youOutpatient=t.indexOf("门诊绿通")>-1?1:0,this.goodsInfo.youHospital=t.indexOf("住院绿通")>-1?1:0,this.goodsInfo.youOperation=t.indexOf("手术绿通")>-1?1:0,this.goodsInfo.youSecondMed=t.indexOf("二次诊疗")>-1?1:0,this.goodsInfo.ptCashPrePay=t.indexOf("押金垫付")>-1?1:0,this.goodsInfo.ptPhoneDoctor=t.indexOf("电话医生")>-1?1:0,console.log(this.goodsInfo)}}},E=L,w=(s("5065"),Object(h["a"])(E,a,i,!1,null,"20477e47",null));w.options.__file="addOrEditGoods.vue";e["default"]=w.exports},f33d:function(t,e,s){"use strict";var o=s("15ac"),a=s.n(o);a.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-379e9634.97498605.js.map