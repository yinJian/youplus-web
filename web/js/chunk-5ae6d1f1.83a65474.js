(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ae6d1f1"],{"2fdb":function(e,t,a){"use strict";var n=a("5ca1"),i=a("d2c8"),s="includes";n(n.P+n.F*a("5147")(s),"String",{includes:function(e){return!!~i(this,e,s).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"38f1":function(e,t,a){"use strict";a("cadf"),a("551c"),a("097d");var n=[{label:"企业管理",url:"/comManage",children:[{label:"企业列表",url:"/comManage/comList",id:"11"},{label:"信息复核",url:"/comManage/infoRecheck",id:"12"}]},{label:"医疗网络",ul:"/hosNetwork",children:[{label:"医院管理",url:"/hosNetwork/hospital",id:"21"},{label:"医生管理",url:"/hosNetwork/doctor",id:"22"},{label:"体检管理",url:"/hosNetwork/phyExamination",id:"23"},{label:"中医管理",url:"/hosNetwork/chMedicine",id:"24"},{label:"齿科管理",url:"/hosNetwork/dentistry",id:"25"}]},{label:"用户管理",ul:"/userManage",children:[{label:"用户列表",url:"/userManage/userList",id:"31"},{label:"驻场人员",url:"/userManage/userFiled",id:"32"}]},{label:"数据字典",children:[{label:"地区管理",url:"/wordBook/region",id:"41"},{label:"科室管理",url:"/wordBook/department",id:"42"},{label:"医院等级",url:"/wordBook/hosLevel",id:"43"},{label:"医生职称",url:"/wordBook/doctorTitle",id:"44"}]},{label:"系统管理",children:[{label:"用户管理",url:"/systemManage/user",id:"51"},{label:"角色管理",url:"/systemManage/role",id:"52"}]}];t["a"]=n},"3ff3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-new"},[a("div",{staticClass:"list"},[a("span",[e._v("角色姓名：")]),a("el-input",{staticClass:"com-input",attrs:{placeholder:"请输入角色姓名"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("div",{staticClass:"list manage"},[a("span",[e._v("权限管理：")]),a("div",{staticClass:"right"},[a("div",{staticClass:"title"},[e._v("企业管理")]),a("el-checkbox-group",{model:{value:e.companyCheck,callback:function(t){e.companyCheck=t},expression:"companyCheck"}},e._l(e.companyMange,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),a("div",{staticClass:"title"},[e._v("医疗网络")]),a("el-checkbox-group",{model:{value:e.companyCheck,callback:function(t){e.companyCheck=t},expression:"companyCheck"}},e._l(e.hosNetworkList,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),a("div",{staticClass:"title"},[e._v("用户管理")]),a("el-checkbox-group",{model:{value:e.companyCheck,callback:function(t){e.companyCheck=t},expression:"companyCheck"}},e._l(e.userManageList,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),a("div",{staticClass:"title"},[e._v("数据字典")]),a("el-checkbox-group",{model:{value:e.companyCheck,callback:function(t){e.companyCheck=t},expression:"companyCheck"}},e._l(e.wordBookList,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),a("div",{staticClass:"title"},[e._v("系统管理")]),a("el-checkbox-group",{model:{value:e.companyCheck,callback:function(t){e.companyCheck=t},expression:"companyCheck"}},e._l(e.systemList,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}))],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"list"},[a("span",[e._v("允许删除：")]),a("el-radio-group",{model:{value:e.delMsg,callback:function(t){e.delMsg=t},expression:"delMsg"}},[a("el-radio",{attrs:{label:3}},[e._v("是")]),a("el-radio",{attrs:{label:6}},[e._v("否")])],1)],1),a("div",{staticClass:"list"},[a("span",[e._v("角色状态：")]),a("el-radio-group",{model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},[a("el-radio",{attrs:{label:"0"}},[e._v("启用")]),a("el-radio",{attrs:{label:"-1"}},[e._v("停用")])],1)],1),a("div",{staticClass:"list submit"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),a("el-button",{on:{click:e.cancle}},[e._v("取消")])],1)])},i=[],s=(a("6762"),a("2fdb"),a("6b54"),a("7f7f"),a("d48e")),o=a("38f1"),c=["name","state","menuIds"],l={name:"roleNew",data:function(){return{name:"",delMsg:"",state:"0",companyCheck:[],companyMange:["企业列表","信息复核"],hosNetworkList:["医疗网络","医生管理","体检管理","中医管理","齿科管理"],userManageList:["用户列表","驻场人员"],wordBookList:["地区管理","科室管理","医院等级","医生职称"],systemList:["用户管理","角色管理"],check:s["a"].methods.check,checkTip:s["a"].tips.checkTip}},mounted:function(){this.editInit()},methods:{editInit:function(){var e=this,t=this.$route.query,a=t.type,n=t.id;n&&(this.loading=!0,this.type=a,this.id=n,this.api.get("/role/".concat(n)).then(function(t){e.dataInit(t.data),e.loading=!1}).catch(function(t){console.log(t),e.loading=!1,e.$message(t.data.message)}))},dataInit:function(e){var t=this;e=e||{};var a=e.role,n=a.name,i=a.state;this.name=n,this.state=i.toString();var s=JSON.parse(JSON.stringify(o["a"]));this.companyCheck=this.lodash.map(e.menus,function(e){var a="";return t.lodash.map(s,function(n){t.lodash.filter(n.children,function(t){t.id==e&&(a=t.label)})}),a})},submit:function(){var e=this,t=JSON.parse(JSON.stringify(o["a"])),a=[],n=[].concat(this.companyCheck);if(n.length<1)return this.$message("请补全信息后提交");t=this.lodash.filter(t,function(t){return t.children=e.lodash.filter(t.children,function(t){return e.lodash.includes(n,t.label)}),t.children.length>0}),this.lodash.map(t,function(t){return e.lodash.map(t.children,function(e){return a.push(e.id),e}),t});var i={name:this.name,state:this.state,menuIds:a};this.check(i,c).then(function(){e.addUser(i)},function(){e.$message(e.checkTip)}).catch(function(t){console.log(t),e.$message(t.data.message)})},editUser:function(e){var t=this;e.id=this.id,this.loading=!0,this.api.put("/role",e).then(function(e){t.loading=!1,t.$router.go(-1)}).catch(function(e){console.log(e),t.loading=!1,t.$message(e.data.message)})},addUser:function(e){var t=this;if("edit"===this.$route.query.type)return this.editUser(e);this.loading=!0,this.api.post("/role",e).then(function(e){t.$router.go(-1),t.loading=!1}).catch(function(e){console.log(e),t.loading=!1,t.$message(e.data.message)})},cancle:function(){this.$router.go(-1)}}},r=l,u=(a("fae8"),a("2877")),d=Object(u["a"])(r,n,i,!1,null,"321d55e8",null);d.options.__file="roleNew.vue";t["default"]=d.exports},5147:function(e,t,a){var n=a("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,!"/./"[e](t)}catch(i){}}return!0}},"5dd0":function(e,t,a){},6762:function(e,t,a){"use strict";var n=a("5ca1"),i=a("c366")(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},aae3:function(e,t,a){var n=a("d3f4"),i=a("2d95"),s=a("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},d2c8:function(e,t,a){var n=a("aae3"),i=a("be13");e.exports=function(e,t,a){if(n(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(i(e))}},d48e:function(e,t,a){"use strict";t["a"]={methods:{check:function(e,t){var a=this;return new Promise(function(n,i){a.lodash.some(t,function(t){e[t]||a.lodash.isBoolean(e[t])||i()}),n()})}},tips:{checkTip:"请补全信息后提交"}}},fae8:function(e,t,a){"use strict";var n=a("5dd0"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-5ae6d1f1.83a65474.js.map