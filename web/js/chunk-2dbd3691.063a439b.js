(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dbd3691"],{"1ec8":function(t,e,a){},3480:function(t,e,a){},"386d":function(t,e,a){a("214f")("search",1,function(t,e,a){return[function(a){"use strict";var i=t(this),s=void 0==a?void 0:a[e];return void 0!==s?s.call(a,i):new RegExp(a)[e](String(i))},a]})},"4fa0":function(t,e,a){"use strict";var i=a("cc3b"),s=a.n(i);s.a},"52b5":function(t,e,a){},"52ba":function(t,e,a){"use strict";var i=a("fadf"),s=a.n(i);s.a},"65b8":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"address-group"},[a("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}},t._l(t.provinceList,function(t){return a("el-option",{key:t.id,attrs:{label:t.areaName,value:t.id}})})),a("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cityList,function(t){return a("el-option",{key:t.id,attrs:{label:t.areaName,value:t.id}})})),a("el-select",{staticClass:"address-input",style:t.seletStyle,attrs:{placeholder:"全部"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}},t._l(t.countryList,function(t){return a("el-option",{key:t.id,attrs:{label:t.areaName,value:t.id}})}))],1)},s=[],n=a("7622"),o=a("dd36"),r=!0,c={name:"userAddress",props:["seletStyle","defaultValue"],data:function(){return{provinceList:[],cityList:[],countryList:[],province:"",city:"",country:""}},mounted:function(){this.handleProvince()},methods:{handleProvince:function(){this.provinceList=n["a"]},handleData:function(t,e,a){var i=this;t&&Object(o["a"])("area",{parentId:t}).then(function(t){if(t.data.code=i.ok)return a&&a(t.data.data),"province"===e?i.cityList=t.data.data:i.countryList=t.data.data;i.$message("系统繁忙，请稍后再试")}).catch(function(t){console.log(t),i.$message("系统繁忙，请稍后再试!")})},getData:function(){var t=this,e=this.provinceList.filter(function(e){return t.province===e.id}),a=this.cityList.filter(function(e){return t.city===e.id}),i=this.countryList.filter(function(e){return t.country===e.id}),s=e.length>0?e[0].areaCode:"",n=a.length>0?a[0].areaCode:"",o=i.length>0?i[0].areaCode:"",r={province:s,city:n,country:o};return r}},watch:{defaultValue:function(){var t=this;if(this.defaultValue){var e=this.defaultValue,a=e.province,i=e.city,s=e.country;if(r=!1,!a)return r=!0;var n=this.lodash.filter(this.provinceList,function(t){return t.areaCode==a});this.province=n[0].id,Object(o["a"])("area",{parentId:this.province}).then(function(e){if(e.data.code=t.ok){if(t.cityList=e.data.data,!i)return r=!0;var a=t.lodash.filter(t.cityList,function(t){return t.areaCode==i});t.city=a[0].id,Object(o["a"])("area",{parentId:t.city}).then(function(e){if(e.data.code=t.ok){if(t.countryList=e.data.data,!s)return r=!0;var a=t.lodash.filter(t.countryList,function(t){return t.areaCode==s});t.country=a[0].id,r=!0}})}})}},province:function(t,e){t&&r&&(this.cityList=[],this.countryList=[],this.city="",this.country="",this.handleData(t,"province"))},city:function(t,e){t&&r&&(this.countryList=[],this.country="",this.handleData(t,"city"))},country:function(t,e){this.$emit("countryChange",this.getData())}}},l=c,d=(a("52ba"),a("2877")),u=Object(d["a"])(l,i,s,!1,null,"29084cf2",null);u.options.__file="address.vue";e["a"]=u.exports},"74f6":function(t,e,a){"use strict";var i=a("52b5"),s=a.n(i);s.a},7622:function(t,e,a){"use strict";a.d(e,"a",function(){return i});var i=JSON.parse(sessionStorage.addressProvince)},"7a3c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userFiled"},[a("userfiled-options",{ref:"userfiledOptions",on:{dialogState:t.dialogState,search:t.search}}),a("userfiled-table",{attrs:{loading:t.loading,data:t.data},on:{dialogState:t.dialogState,search:t.search}}),a("div",{staticClass:"demonstration-box"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageParams.size,layout:"total, prev, pager, next",total:t.pageParams.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),t.state?a("add-userfiled",{attrs:{type:t.type,id:t.id},on:{search:t.search,dialogState:t.dialogState}}):t._e()],1)},s=[],n=(a("386d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",{staticClass:"header"},[a("div",{staticClass:"left"},[a("div",[a("span",[t._v("驻场人员姓名：")]),a("el-input",{staticClass:"com-input",attrs:{placeholder:"请输入驻场人员姓名"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),a("span",[t._v("驻场人员手机号：")]),a("el-input",{staticClass:"com-input",attrs:{placeholder:"请输入驻场人员手机号"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),a("div",{staticClass:"group"},[a("span",{staticClass:"text"},[t._v("地区：")]),a("user-address",{ref:"userfileAddress"})],1)]),a("div",{staticClass:"right"},[a("el-button",{staticClass:"btn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("查询")]),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.addCom}},[t._v("新增驻场人员")])],1)])],1)}),o=[],r=a("65b8"),c={name:"doctorOptions",data:function(){return{userName:"",mobile:""}},components:{UserAddress:r["a"]},methods:{addCom:function(){var t={type:"new",state:!0};this.$emit("dialogState",t)},search:function(){this.$emit("search")},getData:function(){var t={userName:this.userName,mobile:this.mobile};return this.lodash.assign({},t,this.$refs.userfileAddress.getData())}}},l=c,d=(a("74f6"),a("2877")),u=Object(d["a"])(l,n,o,!1,null,"48f1b426",null);u.options.__file="userfiledOptions.vue";var f=u.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-table",{attrs:{data:t.userFiledList}},[a("el-table-column",{attrs:{prop:"id",label:"人员ID"}}),a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),a("el-table-column",{attrs:{prop:"nickName",label:"微信昵称"}}),a("el-table-column",{attrs:{prop:"address",label:"地区"}}),a("el-table-column",{attrs:{prop:"mobile",label:"手机号码"}}),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleClick(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.delMsg(e.row)}}},[t._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("确认删除该条信息？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.sure}},[t._v("确 定")])],1)])],1)],1)},p=[],m={name:"userfiledTable",props:["data","loading"],data:function(){return{userFiledList:[],dialogVisible:!1,id:""}},methods:{handleClick:function(t){this.id=t.id;var e={type:"edit",id:this.id,state:!0};this.$emit("dialogState",e)},delMsg:function(t){this.id=t.id,this.dialogVisible=!0},sure:function(){var t=this;this.api.delete("/groundPerson/".concat(this.id)).then(function(){t.userFiledList=t.userFiledList.filter(function(e){return e.id!==t.id})}).catch(function(e){console.log(e),t.$message(e.data.message)}),this.dialogVisible=!1}},watch:{data:function(t){this.userFiledList=t}}},g=m,v=(a("4fa0"),Object(d["a"])(g,h,p,!1,null,"aa82bf94",null));v.options.__file="userfiledTable.vue";var b=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.activeheader,width:"900px",visible:t.dialogVisible,"before-close":t.cancle},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"list"},[a("span",[t._v("驻场人员姓名：")]),a("el-input",{staticClass:"com-input",attrs:{placeholder:"请输入驻场人员姓名"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}})],1),a("div",{staticClass:"list"},[a("span",[t._v("驻场人员手机号：")]),a("el-input",{staticClass:"com-input",attrs:{placeholder:"请输入驻场人员姓名"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),a("div",{staticClass:"list"},[a("span",[t._v("地区：")]),a("user-address",{ref:"addUserAddress",attrs:{defaultValue:t.defaultAddress}})],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancle}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)])},C=[],_=a("d48e"),k=["userName","mobile","province","city","country"],P=["新增驻场人员","信息编辑"],$={name:"addUserfiled",props:["type","id"],data:function(){return{dialogVisible:!0,loading:!1,userName:"",mobile:"",activeheader:P[0],check:_["a"].methods.check,checkTip:_["a"].tips.checkTip,defaultAddress:null}},components:{UserAddress:r["a"]},mounted:function(){this.editInit()},methods:{editInit:function(){var t=this;"edit"===this.type&&(this.activeheader=P[1]),this.id&&(this.loading=!0,this.api.get("/groundPerson/".concat(this.id)).then(function(e){t.dataInit(e.data),setTimeout(function(){t.loading=!1},20)}).catch(function(e){console.log(e),t.loading=!1,t.$message(e.message)}))},dataInit:function(t){t=t||{};var e=t,a=e.userName,i=e.mobile,s=e.id,n=e.province,o=e.city,r=e.country;this.userName=a,this.mobile=i,this.id=s,this.defaultAddress={province:n,city:o,country:r}},submit:function(){var t=this,e=this.$refs.addUserAddress.getData(),a={userName:this.userName,mobile:this.mobile},i=this.lodash.assign({},a,e);this.check(i,k).then(function(){t.addUser(i)},function(){t.$message(t.checkTip)}).catch(function(e){console.log(e),t.$message(e.data.message)})},editUser:function(t){var e=this;t.id=this.id,this.api.put("/groundPerson",t,"form").then(function(t){t.data.code===e.ok&&(e.$emit("search"),e.$emit("dialogState",{state:!1}))}).catch(function(t){console.log(t),e.$message(t.data.message)})},addUser:function(t){var e=this;if(console.log(this.header,"oooooooo"),"信息编辑"===this.header)return this.editUser(t);this.api.post("/groundPerson",t,"form").then(function(t){e.$emit("search"),e.$emit("dialogState",{state:!1})}).catch(function(t){console.log(t),e.$message(t.data.message)})},cancle:function(){this.$emit("dialogState",{state:!1})}}},L=$,N=(a("ad28"),Object(d["a"])(L,y,C,!1,null,"485049d6",null));N.options.__file="addUserfiled.vue";var x=N.exports,S=a("b383"),w=a.n(S),V=a("9cf8"),O={name:"userFiled",mixins:[V["a"]],data:function(){return{type:"",id:"",data:[],currentPage:1,loading:!1,state:!1}},mounted:function(){this.search()},methods:{search:function(){var t=this;this.loading=!0;var e=this.$refs.userfiledOptions.getData(),a={size:20,page:this.currentPage-1},i=this.lodash.assign({},e,a),s=w.a.stringify(i||{});this.api.get("/groundPerson?".concat(s)).then(function(e){t.loading=!1,e.data&&(t.data=e.data.list,t.setPage(e.data),t.dataInit())}).catch(function(e){console.log(e),t.loading=!1,t.$message(e.data)})},dataInit:function(){this.data.map(function(t){t.country&&(t.address=t.address||"".concat(t.provinceValue,"-").concat(t.countryValue,"-").concat(t.cityValue))})},dialogState:function(t){t=t||{},this.state=t.state,this.type=t.type,this.id=t.id}},watch:{currentPage:function(){this.search()}},components:{UserfiledOptions:f,UserfiledTable:b,AddUserfiled:x}},U=O,A=(a("f6f2"),Object(d["a"])(U,i,s,!1,null,"0aba794e",null));A.options.__file="userFiled.vue";e["default"]=A.exports},"9cf8":function(t,e,a){"use strict";a("386d"),a("cadf"),a("551c"),a("097d");var i={size:20,totalCount:100,totalPage:1},s={data:function(){return{pageParams:i,currentPage:1}},methods:{setPage:function(t){this.pageParams.totalCount=t.totalCount,this.pageParams.totalPage=t.totalPage},handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.currentPage=t}},watch:{currentPage:function(){this.search()}}};e["a"]=s},ad28:function(t,e,a){"use strict";var i=a("1ec8"),s=a.n(i);s.a},cc3b:function(t,e,a){},d48e:function(t,e,a){"use strict";e["a"]={methods:{check:function(t,e){var a=this;return new Promise(function(i,s){a.lodash.some(e,function(e){t[e]||a.lodash.isBoolean(t[e])||s()}),i()})}},tips:{checkTip:"请补全信息后提交"}}},f6f2:function(t,e,a){"use strict";var i=a("3480"),s=a.n(i);s.a},fadf:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2dbd3691.063a439b.js.map